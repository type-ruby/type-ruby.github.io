---
slug: v0-0-40-release
title: T-Ruby v0.0.40 Released
authors: [yhk1038]
tags: [release, parser]
---

T-Ruby v0.0.40 brings significant parser improvements, including access modifier support and heredoc detection. ([PR#22](https://github.com/type-ruby/t-ruby/pull/22))

<!-- truncate -->

## Access Modifier Support

> ðŸ“– See also: [Class Annotations](/docs/learn/classes/class-annotations)

You can now use Ruby's access modifiers directly with method definitions:

```ruby
private def secret_method(key: String): String
  # ...
end

protected def internal_method(data: Hash): Boolean
  # ...
end
```

T-Ruby correctly parses these patterns and preserves access modifier keywords during type erasure.

## Heredoc Detection

A new `HeredocDetector` prevents false positive method detection inside heredoc strings:

```ruby
message = <<~SQL
  def fake_method  # This won't be parsed as a method
    SELECT * FROM users
  end
SQL
```

Supports all heredoc variants: `<<DELIM`, `<<-DELIM`, `<<~DELIM`, `<<'DELIM'`, `<<"DELIM"`.

## Block Comment Support

Parser now correctly skips `=begin`/`=end` block comments.

## RBS Access Modifier Support

Generated `.rbs` files now include access modifiers:

```rbs
private def secret_method: (key: String) -> String
```

## Legacy Code Removal

This release removes deprecated legacy compiler code:
- `LegacyParser` class removed
- `LegacyCompiler` class removed
- `TRuby::RBSGenerator` removed (use `IR::RBSGenerator`)
- `use_ir` and `use_combinator` parameters removed (IR is now always used)

## Upgrade

```bash
gem update t-ruby
```
