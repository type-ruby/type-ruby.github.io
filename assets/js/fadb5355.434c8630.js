"use strict";(globalThis.webpackChunkt_ruby_docs=globalThis.webpackChunkt_ruby_docs||[]).push([[6704],{4220:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"getting-started/first-trb-file","title":"Your First .trb File","description":"Create and compile your first T-Ruby file","source":"@site/docs/getting-started/first-trb-file.md","sourceDirName":"getting-started","slug":"/getting-started/first-trb-file","permalink":"/docs/getting-started/first-trb-file","draft":false,"unlisted":false,"editUrl":"https://github.com/type-ruby/t-ruby.github.io/tree/main/docs/getting-started/first-trb-file.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Your First .trb File","description":"Create and compile your first T-Ruby file"},"sidebar":"docsSidebar","previous":{"title":"Quick Start","permalink":"/docs/getting-started/quick-start"},"next":{"title":"Editor Setup","permalink":"/docs/getting-started/editor-setup"}}');var i=r(2714),a=r(8885);const s={sidebar_position:3,title:"Your First .trb File",description:"Create and compile your first T-Ruby file"},l="Your First .trb File",d={},o=[{value:"Understanding .trb Files",id:"understanding-trb-files",level:2},{value:"Creating the File",id:"creating-the-file",level:2},{value:"Anatomy of a Typed Function",id:"anatomy-of-a-typed-function",level:3},{value:"Adding More Features",id:"adding-more-features",level:2},{value:"Understanding Union Types",id:"understanding-union-types",level:3},{value:"Understanding Generics",id:"understanding-generics",level:3},{value:"Adding a Class",id:"adding-a-class",level:2},{value:"Compiling and Running",id:"compiling-and-running",level:2},{value:"Examining the Output",id:"examining-the-output",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Optional Parameters",id:"optional-parameters",level:3},{value:"Nullable Types (Optional Shorthand)",id:"nullable-types-optional-shorthand",level:3},{value:"Block Parameters",id:"block-parameters",level:3},{value:"Error Messages",id:"error-messages",level:2},{value:"Type Mismatch",id:"type-mismatch",level:3},{value:"Missing Type Annotation",id:"missing-type-annotation",level:3},{value:"Unknown Type",id:"unknown-type",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{DocsBadge:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("DocsBadge",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{}),"\n",(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"your-first-trb-file",children:"Your First .trb File"})}),"\n",(0,i.jsx)(n.p,{children:"This guide takes you through creating a T-Ruby file step by step, explaining each concept as we go."}),"\n",(0,i.jsx)(n.h2,{id:"understanding-trb-files",children:"Understanding .trb Files"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.code,{children:".trb"})," file is a T-Ruby source file. It's essentially Ruby code with type annotations. The T-Ruby compiler (",(0,i.jsx)(n.code,{children:"trc"}),") reads ",(0,i.jsx)(n.code,{children:".trb"})," files and produces:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:".rb"})," files"]})," - Standard Ruby code with types removed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:".rbs"})," files"]})," - Type signature files for tooling"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"creating-the-file",children:"Creating the File"}),"\n",(0,i.jsxs)(n.p,{children:["Let's create a file called ",(0,i.jsx)(n.code,{children:"calculator.trb"})," that implements a simple calculator:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",metastring:'title="calculator.trb"',children:"# calculator.trb - A simple typed calculator\n\n# Basic arithmetic operations with type annotations\ndef add(a: Integer, b: Integer): Integer\n  a + b\nend\n\ndef subtract(a: Integer, b: Integer): Integer\n  a - b\nend\n\ndef multiply(a: Integer, b: Integer): Integer\n  a * b\nend\n\ndef divide(a: Integer, b: Integer): Float\n  a.to_f / b\nend\n"})}),"\n",(0,i.jsx)(n.h3,{id:"anatomy-of-a-typed-function",children:"Anatomy of a Typed Function"}),"\n",(0,i.jsx)(n.p,{children:"Let's break down the syntax:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",children:"def add(a: Integer, b: Integer): Integer\n#   ^^^  ^  ^^^^^^^  ^  ^^^^^^^   ^^^^^^^\n#   |    |    |      |    |         |\n#   |    |    |      |    |         \u2514\u2500\u2500 Return type\n#   |    |    |      |    \u2514\u2500\u2500 Second parameter type\n#   |    |    |      \u2514\u2500\u2500 Second parameter name\n#   |    |    \u2514\u2500\u2500 First parameter type\n#   |    \u2514\u2500\u2500 First parameter name\n#   \u2514\u2500\u2500 Function name\n"})}),"\n",(0,i.jsx)(n.h2,{id:"adding-more-features",children:"Adding More Features"}),"\n",(0,i.jsx)(n.p,{children:"Let's expand our calculator with more advanced features:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",metastring:'title="calculator.trb"',children:"# Type alias for cleaner code\ntype Number = Integer | Float\n\n# Now our functions can accept both Integer and Float\ndef add(a: Number, b: Number): Number\n  a + b\nend\n\ndef subtract(a: Number, b: Number): Number\n  a - b\nend\n\ndef multiply(a: Number, b: Number): Number\n  a * b\nend\n\ndef divide(a: Number, b: Number): Float\n  a.to_f / b.to_f\nend\n\n# A function that might fail - returns nil on error\ndef safe_divide(a: Number, b: Number): Float | nil\n  return nil if b == 0\n  a.to_f / b.to_f\nend\n\n# Using a generic type for a utility function\ndef max<T: Comparable>(a: T, b: T): T\n  a > b ? a : b\nend\n"})}),"\n",(0,i.jsx)(n.h3,{id:"understanding-union-types",children:"Understanding Union Types"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"|"})," operator creates a union type:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",children:"type Number = Integer | Float  # Can be Integer OR Float\n\ndef safe_divide(a: Number, b: Number): Float | nil\n  # Return type can be Float OR nil\n  return nil if b == 0\n  a.to_f / b.to_f\nend\n"})}),"\n",(0,i.jsx)(n.h3,{id:"understanding-generics",children:"Understanding Generics"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"<T>"})," syntax defines a generic type parameter:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",children:'def max<T: Comparable>(a: T, b: T): T\n#     ^^  ^^^^^^^^^^\n#     |       |\n#     |       \u2514\u2500\u2500 Constraint: T must implement Comparable\n#     \u2514\u2500\u2500 Generic type parameter\n\n# This works with any comparable type:\nmax(5, 3)       # T is Integer\nmax(5.5, 3.2)   # T is Float\nmax("a", "b")   # T is String\n'})}),"\n",(0,i.jsx)(n.h2,{id:"adding-a-class",children:"Adding a Class"}),"\n",(0,i.jsx)(n.p,{children:"Let's create a Calculator class:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",metastring:'title="calculator.trb"',children:'class Calculator\n  # Instance variable with type annotation\n  @history: Array<String>\n\n  def initialize: void\n    @history = []\n  end\n\n  def add(a: Number, b: Number): Number\n    result = a + b\n    record_operation("#{a} + #{b} = #{result}")\n    result\n  end\n\n  def subtract(a: Number, b: Number): Number\n    result = a - b\n    record_operation("#{a} - #{b} = #{result}")\n    result\n  end\n\n  def multiply(a: Number, b: Number): Number\n    result = a * b\n    record_operation("#{a} * #{b} = #{result}")\n    result\n  end\n\n  def divide(a: Number, b: Number): Float | nil\n    if b == 0\n      record_operation("#{a} / #{b} = ERROR (division by zero)")\n      return nil\n    end\n    result = a.to_f / b.to_f\n    record_operation("#{a} / #{b} = #{result}")\n    result\n  end\n\n  def history: Array<String>\n    @history.dup\n  end\n\n  private\n\n  def record_operation(operation: String): void\n    @history << operation\n  end\nend\n\n# Using the class\ncalc = Calculator.new\nputs calc.add(10, 5)      # 15\nputs calc.multiply(3, 4)  # 12\nputs calc.divide(10, 3)   # 3.333...\nputs calc.divide(10, 0)   # nil\n\nputs "\\nHistory:"\ncalc.history.each { |op| puts "  #{op}" }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"compiling-and-running",children:"Compiling and Running"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Compile\ntrc calculator.trb\n\n# Run\nruby build/calculator.rb\n"})}),"\n",(0,i.jsx)(n.p,{children:"Expected output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"15\n12\n3.3333333333333335\n\nHistory:\n  10 + 5 = 15\n  3 * 4 = 12\n  10 / 3 = 3.3333333333333335\n"})}),"\n",(0,i.jsx)(n.h2,{id:"examining-the-output",children:"Examining the Output"}),"\n",(0,i.jsx)(n.p,{children:"Look at the generated files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",metastring:'title="build/calculator.rb"',children:'class Calculator\n  def initialize\n    @history = []\n  end\n\n  def add(a, b)\n    result = a + b\n    record_operation("#{a} + #{b} = #{result}")\n    result\n  end\n\n  # ... types are completely removed\nend\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rbs",metastring:'title="build/calculator.rbs"',children:"type Number = Integer | Float\n\nclass Calculator\n  @history: Array[String]\n\n  def initialize: () -> void\n  def add: (Number a, Number b) -> Number\n  def subtract: (Number a, Number b) -> Number\n  def multiply: (Number a, Number b) -> Number\n  def divide: (Number a, Number b) -> Float?\n  def history: () -> Array[String]\n  private def record_operation: (String operation) -> void\nend\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"optional-parameters",children:"Optional Parameters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",children:'def greet(name: String, greeting: String = "Hello"): String\n  "#{greeting}, #{name}!"\nend\n\ngreet("Alice")           # "Hello, Alice!"\ngreet("Alice", "Hi")     # "Hi, Alice!"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"nullable-types-optional-shorthand",children:"Nullable Types (Optional Shorthand)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-trb",children:"# These are equivalent:\ndef find(id: Integer): User | nil\ndef find(id: Integer): User?  # Shorthand\n"})}),"\n",(0,i.jsx)(n.h3,{id:"block-parameters",children:"Block Parameters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rbs",children:'def each_item(items: Array<String>, &block: (String) -> void): void\n  items.each(&block)\nend\n\neach_item(["a", "b", "c"]) { |item| puts item }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error-messages",children:"Error Messages"}),"\n",(0,i.jsx)(n.p,{children:"T-Ruby provides helpful error messages. Here are some you might encounter:"}),"\n",(0,i.jsx)(n.h3,{id:"type-mismatch",children:"Type Mismatch"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Error: calculator.trb:5:10\n  Type mismatch: expected Integer, got String\n\n    add("hello", 5)\n        ^^^^^^^\n'})}),"\n",(0,i.jsx)(n.h3,{id:"missing-type-annotation",children:"Missing Type Annotation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Warning: calculator.trb:3:5\n  Parameter 'x' has no type annotation\n\n    def process(x)\n                ^\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unknown-type",children:"Unknown Type"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: calculator.trb:2:15\n  Unknown type 'Stringg' (did you mean 'String'?)\n\n    def greet(name: Stringg): String\n                    ^^^^^^^\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Start with public APIs"})," - Type your public methods first"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use type aliases"})," - Make complex types readable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Prefer specific types"})," - ",(0,i.jsx)(n.code,{children:"Array<String>"})," over ",(0,i.jsx)(n.code,{children:"Array"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document with types"})," - Types serve as documentation"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Now that you understand ",(0,i.jsx)(n.code,{children:".trb"})," files, continue with:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/getting-started/editor-setup",children:"Editor Setup"})," - Get IDE support"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/getting-started/project-configuration",children:"Project Configuration"})," - Configure larger projects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/learn/basics/basic-types",children:"Basic Types"})," - Deep dive into the type system"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8885:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var t=r(9378);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);