"use strict";(globalThis.webpackChunkt_ruby_docs=globalThis.webpackChunkt_ruby_docs||[]).push([[5933],{8110:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"tooling/ruby-lsp","title":"Using with Ruby LSP","description":"IDE features with Ruby LSP","source":"@site/docs/tooling/ruby-lsp.md","sourceDirName":"tooling","slug":"/tooling/ruby-lsp","permalink":"/docs/tooling/ruby-lsp","draft":false,"unlisted":false,"editUrl":"https://github.com/type-ruby/t-ruby.github.io/tree/main/docs/tooling/ruby-lsp.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Using with Ruby LSP","description":"IDE features with Ruby LSP"},"sidebar":"docsSidebar","previous":{"title":"Using with Steep","permalink":"/docs/tooling/steep"},"next":{"title":"Migrating from Ruby","permalink":"/docs/tooling/migrating-from-ruby"}}');var r=s(2714),t=s(8885);const l={sidebar_position:3,title:"Using with Ruby LSP",description:"IDE features with Ruby LSP"},o="Using with Ruby LSP",d={},c=[{value:"What is Ruby LSP?",id:"what-is-ruby-lsp",level:2},{value:"Installation",id:"installation",level:2},{value:"VS Code",id:"vs-code",level:3},{value:"Other Editors",id:"other-editors",level:3},{value:"Basic Setup for T-Ruby",id:"basic-setup-for-t-ruby",level:2},{value:"Step 1: Install Ruby LSP Gem",id:"step-1-install-ruby-lsp-gem",level:3},{value:"Step 2: Compile T-Ruby Code",id:"step-2-compile-t-ruby-code",level:3},{value:"Step 3: Configure Ruby LSP",id:"step-3-configure-ruby-lsp",level:3},{value:"Step 4: Configure RBS Path",id:"step-4-configure-rbs-path",level:3},{value:"T-Ruby-Specific Configuration",id:"t-ruby-specific-configuration",level:2},{value:"Working with .trb Files",id:"working-with-trb-files",level:3},{value:"Syntax Highlighting",id:"syntax-highlighting",level:3},{value:"Workspace Settings",id:"workspace-settings",level:3},{value:"IDE Features with T-Ruby",id:"ide-features-with-t-ruby",level:2},{value:"Autocomplete",id:"autocomplete",level:3},{value:"Go to Definition",id:"go-to-definition",level:3},{value:"Hover Information",id:"hover-information",level:3},{value:"Inline Diagnostics",id:"inline-diagnostics",level:3},{value:"Code Actions",id:"code-actions",level:3},{value:"Document Symbols",id:"document-symbols",level:3},{value:"Integration with Steep",id:"integration-with-steep",level:2},{value:"Install Steep",id:"install-steep",level:3},{value:"Configure Steepfile",id:"configure-steepfile",level:3},{value:"Configure Ruby LSP to Use Steep",id:"configure-ruby-lsp-to-use-steep",level:3},{value:"Workflow with Ruby LSP",id:"workflow-with-ruby-lsp",level:2},{value:"Development Workflow",id:"development-workflow",level:3},{value:"Setup Watch Mode",id:"setup-watch-mode",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom RBS Paths",id:"custom-rbs-paths",level:3},{value:"Formatter Settings",id:"formatter-settings",level:3},{value:"Diagnostics Settings",id:"diagnostics-settings",level:3},{value:"Performance Settings",id:"performance-settings",level:3},{value:"Other Editor Configurations",id:"other-editor-configurations",level:2},{value:"Neovim",id:"neovim",level:3},{value:"Emacs",id:"emacs",level:3},{value:"Sublime Text",id:"sublime-text",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Ruby LSP Not Working",id:"ruby-lsp-not-working",level:3},{value:"RBS Files Not Found",id:"rbs-files-not-found",level:3},{value:"Outdated Diagnostics",id:"outdated-diagnostics",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Type Information Missing",id:"type-information-missing",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Keep Ruby LSP Running",id:"1-keep-ruby-lsp-running",level:3},{value:"2. Use Watch Mode",id:"2-use-watch-mode",level:3},{value:"3. Commit RBS Files",id:"3-commit-rbs-files",level:3},{value:"4. Configure for Performance",id:"4-configure-for-performance",level:3},{value:"5. Use Steep Integration",id:"5-use-steep-integration",level:3},{value:"Complete VS Code Setup",id:"complete-vs-code-setup",level:2},{value:"Keyboard Shortcuts",id:"keyboard-shortcuts",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"using-with-ruby-lsp",children:"Using with Ruby LSP"})}),"\n",(0,r.jsxs)(n.p,{children:["Ruby LSP provides IDE features like autocomplete, go-to-definition, and inline diagnostics for Ruby code. When combined with T-Ruby, you get rich IDE support powered by type information from your ",(0,r.jsx)(n.code,{children:".rbs"})," files."]}),"\n",(0,r.jsx)(n.h2,{id:"what-is-ruby-lsp",children:"What is Ruby LSP?"}),"\n",(0,r.jsx)(n.p,{children:"Ruby LSP is a Language Server Protocol implementation for Ruby that provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Autocomplete"})," - Intelligent code completion"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Go to Definition"})," - Navigate to method/class definitions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hover Information"})," - View type signatures and documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Diagnostics"})," - Inline type errors and warnings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Code Actions"})," - Quick fixes and refactorings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document Symbols"})," - Outline view of file structure"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.h3,{id:"vs-code",children:"VS Code"}),"\n",(0,r.jsx)(n.p,{children:"Install the official Ruby LSP extension:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Open VS Code"}),"\n",(0,r.jsx)(n.li,{children:"Go to Extensions (Ctrl+Shift+X)"}),"\n",(0,r.jsx)(n.li,{children:'Search for "Ruby LSP"'}),"\n",(0,r.jsx)(n.li,{children:"Install the extension by Shopify"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Or install via command line:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"code --install-extension Shopify.ruby-lsp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"other-editors",children:"Other Editors"}),"\n",(0,r.jsx)(n.p,{children:"Ruby LSP works with any editor supporting LSP:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Neovim"}),": Use ",(0,r.jsx)(n.code,{children:"nvim-lspconfig"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emacs"}),": Use ",(0,r.jsx)(n.code,{children:"lsp-mode"})," or ",(0,r.jsx)(n.code,{children:"eglot"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sublime Text"}),": Use ",(0,r.jsx)(n.code,{children:"LSP"})," package"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IntelliJ"}),": Built-in Ruby support"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"basic-setup-for-t-ruby",children:"Basic Setup for T-Ruby"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-install-ruby-lsp-gem",children:"Step 1: Install Ruby LSP Gem"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gem install ruby-lsp\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or add to Gemfile:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'group :development do\n  gem "ruby-lsp"\n  gem "t-ruby"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-compile-t-ruby-code",children:"Step 2: Compile T-Ruby Code"}),"\n",(0,r.jsx)(n.p,{children:"Generate RBS files for type information:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc compile src/\n"})}),"\n",(0,r.jsx)(n.p,{children:"This creates:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"build/          # Compiled Ruby files\nsig/            # RBS type signatures\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-configure-ruby-lsp",children:"Step 3: Configure Ruby LSP"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:".vscode/settings.json"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.enabledFeatures": {\n    "diagnostics": true,\n    "formatting": true,\n    "documentSymbols": true,\n    "hover": true,\n    "completion": true,\n    "codeActions": true\n  },\n  "rubyLsp.indexing": {\n    "includedPatterns": ["**/*.rb", "**/*.trb"],\n    "excludedPatterns": ["**/test/**", "**/vendor/**"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-configure-rbs-path",children:"Step 4: Configure RBS Path"}),"\n",(0,r.jsx)(n.p,{children:"Tell Ruby LSP where to find RBS signatures:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.rbs": {\n    "enabled": true,\n    "path": "sig"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"t-ruby-specific-configuration",children:"T-Ruby-Specific Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"working-with-trb-files",children:"Working with .trb Files"}),"\n",(0,r.jsxs)(n.p,{children:["Configure VS Code to treat ",(0,r.jsx)(n.code,{children:".trb"})," files as Ruby:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/settings.json"',children:'{\n  "files.associations": {\n    "*.trb": "ruby"\n  },\n  "rubyLsp.indexing": {\n    "includedPatterns": ["**/*.rb", "**/*.trb"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"syntax-highlighting",children:"Syntax Highlighting"}),"\n",(0,r.jsx)(n.p,{children:"For better T-Ruby syntax highlighting, create a TextMate grammar or use Ruby highlighting with custom rules:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "editor.tokenColorCustomizations": {\n    "textMateRules": [\n      {\n        "scope": "storage.type.ruby",\n        "settings": {\n          "foreground": "#569CD6"\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"workspace-settings",children:"Workspace Settings"}),"\n",(0,r.jsx)(n.p,{children:"For project-specific configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/settings.json"',children:'{\n  // Ruby LSP\n  "rubyLsp.enabled": true,\n  "rubyLsp.rubyVersionManager": "auto",\n\n  // T-Ruby integration\n  "rubyLsp.rbs": {\n    "enabled": true,\n    "path": "sig"\n  },\n\n  // File associations\n  "files.associations": {\n    "*.trb": "ruby"\n  },\n\n  // Formatting\n  "editor.formatOnSave": true,\n  "[ruby]": {\n    "editor.defaultFormatter": "Shopify.ruby-lsp"\n  },\n\n  // Diagnostics\n  "rubyLsp.enabledFeatures": {\n    "diagnostics": true,\n    "hover": true,\n    "completion": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"ide-features-with-t-ruby",children:"IDE Features with T-Ruby"}),"\n",(0,r.jsx)(n.h3,{id:"autocomplete",children:"Autocomplete"}),"\n",(0,r.jsx)(n.p,{children:"Ruby LSP provides intelligent autocomplete using RBS types:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",metastring:'title="user.trb"',children:'class User\n  @name: String\n  @email: String\n\n  def initialize(name: String, email: String): void\n    @name = name\n    @email = email\n  end\n\n  def greet: String\n    "Hello, #{@name}!"\n  end\nend\n\nuser = User.new("Alice", "alice@example.com")\nuser.   # <- Autocomplete shows: greet, name, email\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After compiling, Ruby LSP reads ",(0,r.jsx)(n.code,{children:"sig/user.rbs"})," and provides:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Method suggestions"}),"\n",(0,r.jsx)(n.li,{children:"Parameter types"}),"\n",(0,r.jsx)(n.li,{children:"Return types"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"go-to-definition",children:"Go to Definition"}),"\n",(0,r.jsx)(n.p,{children:"Navigate from usage to definition:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'user = User.new("Alice", "alice@example.com")\n#      ^^^^ Cmd+Click to jump to User class definition\n\nresult = user.greet\n#            ^^^^^ Cmd+Click to jump to greet method\n'})}),"\n",(0,r.jsx)(n.h3,{id:"hover-information",children:"Hover Information"}),"\n",(0,r.jsx)(n.p,{children:"Hover over symbols to see type information:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"def process_user(user: User): String\n  # Hover over 'user' shows: User\n  # Hover over method shows: (User) -> String\n  user.greet\nend\n"})}),"\n",(0,r.jsx)(n.h3,{id:"inline-diagnostics",children:"Inline Diagnostics"}),"\n",(0,r.jsx)(n.p,{children:"See type errors inline as you code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"def greet(name: String): String\n  name.upcase\nend\n\n# Error shown inline:\ngreet(123)  # Expected String, got Integer\n      ^^^\n"})}),"\n",(0,r.jsx)(n.h3,{id:"code-actions",children:"Code Actions"}),"\n",(0,r.jsx)(n.p,{children:"Quick fixes and refactorings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'class User\n  def initialize(name: String): void\n    @name = name\n  end\n  # \ud83d\udca1 Code action: "Add type annotation for @name"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"document-symbols",children:"Document Symbols"}),"\n",(0,r.jsx)(n.p,{children:"Outline view shows structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"User (class)\n  \u251c\u2500 @name: String\n  \u251c\u2500 @email: String\n  \u251c\u2500 initialize(name, email)\n  \u251c\u2500 greet()\n  \u2514\u2500 update_email(email)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-steep",children:"Integration with Steep"}),"\n",(0,r.jsx)(n.p,{children:"For enhanced type checking, use Ruby LSP with Steep:"}),"\n",(0,r.jsx)(n.h3,{id:"install-steep",children:"Install Steep"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gem install steep\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configure-steepfile",children:"Configure Steepfile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configure-ruby-lsp-to-use-steep",children:"Configure Ruby LSP to Use Steep"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/settings.json"',children:'{\n  "rubyLsp.typechecker": "steep",\n  "rubyLsp.rbs": {\n    "enabled": true,\n    "path": "sig"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Now Ruby LSP will use Steep for type checking, providing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Real-time type errors"}),"\n",(0,r.jsx)(n.li,{children:"More sophisticated type inference"}),"\n",(0,r.jsx)(n.li,{children:"Better autocomplete"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"workflow-with-ruby-lsp",children:"Workflow with Ruby LSP"}),"\n",(0,r.jsx)(n.h3,{id:"development-workflow",children:"Development Workflow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Edit T-Ruby file"})," in VS Code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Save file"})," - T-Ruby watch compiles automatically"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"See updates"})," - Ruby LSP refreshes diagnostics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Get autocomplete"})," - Based on updated RBS"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"setup-watch-mode",children:"Setup Watch Mode"}),"\n",(0,r.jsx)(n.p,{children:"Use T-Ruby watch to auto-compile on save:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc watch src/ --exec \"echo 'Compiled'\"\n"})}),"\n",(0,r.jsx)(n.p,{children:"Configure VS Code to run this on startup:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/tasks.json"',children:'{\n  "version": "2.0.0",\n  "tasks": [\n    {\n      "label": "T-Ruby Watch",\n      "type": "shell",\n      "command": "trc watch src/ --clear",\n      "isBackground": true,\n      "problemMatcher": [],\n      "presentation": {\n        "reveal": "never",\n        "panel": "dedicated"\n      },\n      "runOptions": {\n        "runOn": "folderOpen"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"custom-rbs-paths",children:"Custom RBS Paths"}),"\n",(0,r.jsx)(n.p,{children:"If you have multiple RBS directories:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.rbs": {\n    "enabled": true,\n    "paths": [\n      "sig/generated",\n      "sig/manual",\n      "vendor/rbs"\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"formatter-settings",children:"Formatter Settings"}),"\n",(0,r.jsx)(n.p,{children:"Configure formatting for T-Ruby files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "[ruby]": {\n    "editor.defaultFormatter": "Shopify.ruby-lsp",\n    "editor.formatOnSave": true,\n    "editor.tabSize": 2,\n    "editor.insertSpaces": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"diagnostics-settings",children:"Diagnostics Settings"}),"\n",(0,r.jsx)(n.p,{children:"Customize diagnostic display:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.diagnostics": {\n    "severity": {\n      "type_error": "error",\n      "warning": "warning",\n      "hint": "information"\n    }\n  },\n  "problems.decorations.enabled": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"performance-settings",children:"Performance Settings"}),"\n",(0,r.jsx)(n.p,{children:"For large projects, optimize performance:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.indexing": {\n    "includedPatterns": ["src/**/*.trb", "src/**/*.rb"],\n    "excludedPatterns": [\n      "**/test/**",\n      "**/spec/**",\n      "**/vendor/**",\n      "**/node_modules/**",\n      "**/tmp/**"\n    ]\n  },\n  "rubyLsp.experimental": {\n    "parallelIndexing": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"other-editor-configurations",children:"Other Editor Configurations"}),"\n",(0,r.jsx)(n.h3,{id:"neovim",children:"Neovim"}),"\n",(0,r.jsxs)(n.p,{children:["With ",(0,r.jsx)(n.code,{children:"nvim-lspconfig"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- init.lua\nlocal lspconfig = require(\'lspconfig\')\n\nlspconfig.ruby_lsp.setup({\n  cmd = { "bundle", "exec", "ruby-lsp" },\n  filetypes = { "ruby", "trb" },\n  init_options = {\n    enabledFeatures = {\n      "diagnostics",\n      "formatting",\n      "documentSymbols",\n      "hover",\n      "completion",\n      "codeActions"\n    },\n    rbs = {\n      enabled = true,\n      path = "sig"\n    }\n  }\n})\n\n-- Treat .trb as Ruby\nvim.filetype.add({\n  extension = {\n    trb = "ruby"\n  }\n})\n'})}),"\n",(0,r.jsx)(n.h3,{id:"emacs",children:"Emacs"}),"\n",(0,r.jsxs)(n.p,{children:["With ",(0,r.jsx)(n.code,{children:"lsp-mode"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-elisp",children:';; init.el\n(use-package lsp-mode\n  :hook ((ruby-mode . lsp))\n  :config\n  (setq lsp-ruby-lsp-rbs-enabled t)\n  (setq lsp-ruby-lsp-rbs-path "sig")\n  (add-to-list \'auto-mode-alist \'("\\\\.trb\\\\\'" . ruby-mode)))\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sublime-text",children:"Sublime Text"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="Ruby LSP.sublime-settings"',children:'{\n  "clients": {\n    "ruby-lsp": {\n      "enabled": true,\n      "command": ["bundle", "exec", "ruby-lsp"],\n      "selector": "source.ruby",\n      "initializationOptions": {\n        "enabledFeatures": {\n          "diagnostics": true,\n          "hover": true,\n          "completion": true\n        },\n        "rbs": {\n          "enabled": true,\n          "path": "sig"\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"ruby-lsp-not-working",children:"Ruby LSP Not Working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": No autocomplete or diagnostics."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check Ruby LSP is running:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ps aux | grep ruby-lsp\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Restart Ruby LSP in VS Code:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Cmd+Shift+P \u2192 "Ruby LSP: Restart"'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check output panel:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'View \u2192 Output \u2192 Select "Ruby LSP"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"rbs-files-not-found",children:"RBS Files Not Found"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Ruby LSP doesn't find type information."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Verify RBS files exist:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ls sig/\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check RBS path in settings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.rbs": {\n    "enabled": true,\n    "path": "sig"\n  }\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Reload VS Code window:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Cmd+Shift+P \u2192 "Developer: Reload Window"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"outdated-diagnostics",children:"Outdated Diagnostics"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Diagnostics don't update after compilation."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ensure T-Ruby watch is running:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc watch src/\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Manually refresh Ruby LSP:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Save file (Cmd+S)"}),"\n",(0,r.jsx)(n.li,{children:"Or restart Ruby LSP"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Editor is slow with Ruby LSP."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Exclude unnecessary directories:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.indexing": {\n    "excludedPatterns": [\n      "**/vendor/**",\n      "**/node_modules/**",\n      "**/tmp/**"\n    ]\n  }\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Disable unused features:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.enabledFeatures": {\n    "diagnostics": true,\n    "hover": true,\n    "completion": true,\n    "formatting": false,\n    "codeActions": false\n  }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"type-information-missing",children:"Type Information Missing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": No type info shown on hover."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Verify RBS was generated:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cat sig/user.rbs\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check hover is enabled:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.enabledFeatures": {\n    "hover": true\n  }\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ensure RBS is valid:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rbs validate sig/\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-keep-ruby-lsp-running",children:"1. Keep Ruby LSP Running"}),"\n",(0,r.jsx)(n.p,{children:"Start Ruby LSP automatically with VS Code workspace."}),"\n",(0,r.jsx)(n.h3,{id:"2-use-watch-mode",children:"2. Use Watch Mode"}),"\n",(0,r.jsx)(n.p,{children:"Always run T-Ruby watch during development:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc watch src/ --clear\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-commit-rbs-files",children:"3. Commit RBS Files"}),"\n",(0,r.jsx)(n.p,{children:"Keep RBS files in version control for team members:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'git add sig/\ngit commit -m "Update RBS signatures"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-configure-for-performance",children:"4. Configure for Performance"}),"\n",(0,r.jsx)(n.p,{children:"Exclude unnecessary directories in large projects:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.indexing": {\n    "excludedPatterns": ["**/vendor/**", "**/tmp/**"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-use-steep-integration",children:"5. Use Steep Integration"}),"\n",(0,r.jsx)(n.p,{children:"For best type checking, enable Steep:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rubyLsp.typechecker": "steep"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"complete-vs-code-setup",children:"Complete VS Code Setup"}),"\n",(0,r.jsx)(n.p,{children:"Here's a complete VS Code configuration for T-Ruby development:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/settings.json"',children:'{\n  // Ruby LSP configuration\n  "rubyLsp.enabled": true,\n  "rubyLsp.rubyVersionManager": "auto",\n  "rubyLsp.typechecker": "steep",\n\n  // RBS integration\n  "rubyLsp.rbs": {\n    "enabled": true,\n    "path": "sig"\n  },\n\n  // Features\n  "rubyLsp.enabledFeatures": {\n    "diagnostics": true,\n    "formatting": true,\n    "documentSymbols": true,\n    "hover": true,\n    "completion": true,\n    "codeActions": true,\n    "inlayHints": true\n  },\n\n  // Indexing\n  "rubyLsp.indexing": {\n    "includedPatterns": ["src/**/*.rb", "src/**/*.trb"],\n    "excludedPatterns": [\n      "**/test/**",\n      "**/spec/**",\n      "**/vendor/**",\n      "**/tmp/**"\n    ]\n  },\n\n  // File associations\n  "files.associations": {\n    "*.trb": "ruby"\n  },\n\n  // Formatting\n  "editor.formatOnSave": true,\n  "[ruby]": {\n    "editor.defaultFormatter": "Shopify.ruby-lsp",\n    "editor.tabSize": 2,\n    "editor.insertSpaces": true\n  },\n\n  // Editor appearance\n  "editor.inlayHints.enabled": "on",\n  "problems.decorations.enabled": true,\n\n  // Terminal\n  "terminal.integrated.env.osx": {\n    "RUBYOPT": "-W0"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/tasks.json"',children:'{\n  "version": "2.0.0",\n  "tasks": [\n    {\n      "label": "T-Ruby Watch",\n      "type": "shell",\n      "command": "trc watch src/ --clear",\n      "isBackground": true,\n      "problemMatcher": [],\n      "presentation": {\n        "reveal": "never",\n        "panel": "dedicated"\n      },\n      "runOptions": {\n        "runOn": "folderOpen"\n      }\n    },\n    {\n      "label": "Steep Watch",\n      "type": "shell",\n      "command": "steep watch --code=build --signature=sig",\n      "isBackground": true,\n      "problemMatcher": [],\n      "presentation": {\n        "reveal": "never",\n        "panel": "dedicated"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title=".vscode/extensions.json"',children:'{\n  "recommendations": [\n    "shopify.ruby-lsp",\n    "rebornix.ruby",\n    "castwide.solargraph"\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"keyboard-shortcuts",children:"Keyboard Shortcuts"}),"\n",(0,r.jsx)(n.p,{children:"Useful VS Code shortcuts when using Ruby LSP:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Shortcut (Mac)"}),(0,r.jsx)(n.th,{children:"Shortcut (Windows/Linux)"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Go to Definition"}),(0,r.jsx)(n.td,{children:"Cmd+Click"}),(0,r.jsx)(n.td,{children:"Ctrl+Click"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Go to Definition"}),(0,r.jsx)(n.td,{children:"F12"}),(0,r.jsx)(n.td,{children:"F12"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Peek Definition"}),(0,r.jsx)(n.td,{children:"Alt+F12"}),(0,r.jsx)(n.td,{children:"Alt+F12"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Find References"}),(0,r.jsx)(n.td,{children:"Shift+F12"}),(0,r.jsx)(n.td,{children:"Shift+F12"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Rename Symbol"}),(0,r.jsx)(n.td,{children:"F2"}),(0,r.jsx)(n.td,{children:"F2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Format Document"}),(0,r.jsx)(n.td,{children:"Shift+Alt+F"}),(0,r.jsx)(n.td,{children:"Shift+Alt+F"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Show Hover"}),(0,r.jsx)(n.td,{children:"Cmd+K Cmd+I"}),(0,r.jsx)(n.td,{children:"Ctrl+K Ctrl+I"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Trigger Suggest"}),(0,r.jsx)(n.td,{children:"Ctrl+Space"}),(0,r.jsx)(n.td,{children:"Ctrl+Space"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Quick Fix"}),(0,r.jsx)(n.td,{children:"Cmd+."}),(0,r.jsx)(n.td,{children:"Ctrl+."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Restart LSP"}),(0,r.jsx)(n.td,{children:'Cmd+Shift+P \u2192 "Ruby LSP: Restart"'}),(0,r.jsx)(n.td,{children:'Ctrl+Shift+P \u2192 "Ruby LSP: Restart"'})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/tooling/steep",children:"Using Steep"})," - Enhanced type checking"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/tooling/rbs-integration",children:"RBS Integration"})," - Learn about RBS files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://shopify.github.io/ruby-lsp/",children:"Ruby LSP Documentation"})," - Official docs"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8885:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(9378);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);