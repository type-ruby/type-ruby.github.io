"use strict";(globalThis.webpackChunkt_ruby_docs=globalThis.webpackChunkt_ruby_docs||[]).push([[4295],{1905:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"tooling/steep","title":"Using with Steep","description":"Type checking with Steep","source":"@site/docs/tooling/steep.md","sourceDirName":"tooling","slug":"/tooling/steep","permalink":"/docs/tooling/steep","draft":false,"unlisted":false,"editUrl":"https://github.com/type-ruby/t-ruby.github.io/tree/main/docs/tooling/steep.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Using with Steep","description":"Type checking with Steep"},"sidebar":"docsSidebar","previous":{"title":"RBS Integration","permalink":"/docs/tooling/rbs-integration"},"next":{"title":"Using with Ruby LSP","permalink":"/docs/tooling/ruby-lsp"}}');var r=i(2714),t=i(8885);const l={sidebar_position:2,title:"Using with Steep",description:"Type checking with Steep"},c="Using with Steep",a={},d=[{value:"Why Use Steep with T-Ruby?",id:"why-use-steep-with-t-ruby",level:2},{value:"Installation",id:"installation",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"Step 1: Compile T-Ruby Code",id:"step-1-compile-t-ruby-code",level:3},{value:"Step 2: Create Steepfile",id:"step-2-create-steepfile",level:3},{value:"Step 3: Run Steep",id:"step-3-run-steep",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Steepfile Configuration",id:"steepfile-configuration",level:2},{value:"Basic Structure",id:"basic-structure",level:3},{value:"Multiple Targets",id:"multiple-targets",level:3},{value:"Libraries",id:"libraries",level:3},{value:"Type Resolution",id:"type-resolution",level:3},{value:"Integration with T-Ruby Workflow",id:"integration-with-t-ruby-workflow",level:2},{value:"Development Workflow",id:"development-workflow",level:3},{value:"Watch Mode",id:"watch-mode",level:3},{value:"Single Command Workflow",id:"single-command-workflow",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Strict Mode",id:"strict-mode",level:3},{value:"Custom Type Directories",id:"custom-type-directories",level:3},{value:"Rails Integration",id:"rails-integration",level:3},{value:"Ignore Patterns",id:"ignore-patterns",level:3},{value:"Diagnostic Configuration",id:"diagnostic-configuration",level:2},{value:"Common Diagnostics",id:"common-diagnostics",level:2},{value:"UnresolvedOverloading",id:"unresolvedoverloading",level:3},{value:"FallbackAny",id:"fallbackany",level:3},{value:"IncompatibleAssignment",id:"incompatibleassignment",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"GitHub Actions",id:"github-actions",level:3},{value:"GitLab CI",id:"gitlab-ci",level:3},{value:"Pre-commit Hook",id:"pre-commit-hook",level:3},{value:"Steep Commands",id:"steep-commands",level:2},{value:"Check",id:"check",level:3},{value:"Watch",id:"watch",level:3},{value:"Stats",id:"stats",level:3},{value:"Validate",id:"validate",level:3},{value:"Version",id:"version",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Steep Can&#39;t Find RBS Files",id:"steep-cant-find-rbs-files",level:3},{value:"Type Mismatches",id:"type-mismatches",level:3},{value:"Library Not Found",id:"library-not-found",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Run Steep in CI",id:"1-run-steep-in-ci",level:3},{value:"2. Use Steep Watch During Development",id:"2-use-steep-watch-during-development",level:3},{value:"3. Configure Diagnostics Appropriately",id:"3-configure-diagnostics-appropriately",level:3},{value:"4. Keep RBS Files in Version Control",id:"4-keep-rbs-files-in-version-control",level:3},{value:"5. Use Both T-Ruby and Steep Checks",id:"5-use-both-t-ruby-and-steep-checks",level:3},{value:"Steep vs T-Ruby Type Checking",id:"steep-vs-t-ruby-type-checking",level:2},{value:"Real-World Example",id:"real-world-example",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{DocsBadge:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("DocsBadge",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i,{}),"\n",(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"using-with-steep",children:"Using with Steep"})}),"\n",(0,r.jsx)(n.p,{children:"Steep is a static type checker for Ruby that uses RBS for type signatures. T-Ruby integrates seamlessly with Steep, allowing you to leverage additional type checking beyond what T-Ruby's compiler provides."}),"\n",(0,r.jsx)(n.h2,{id:"why-use-steep-with-t-ruby",children:"Why Use Steep with T-Ruby?"}),"\n",(0,r.jsx)(n.p,{children:"While T-Ruby performs type checking during compilation, Steep provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Additional validation"})," of generated Ruby code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type checking for dependencies"})," and libraries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IDE integration"})," through Ruby LSP"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verification"})," that compiled code matches RBS signatures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Standard Ruby tooling"})," compatibility"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"Add Steep to your project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gem install steep\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or in your Gemfile:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'group :development do\n  gem "steep"\n  gem "t-ruby"\nend\n'})}),"\n",(0,r.jsx)(n.p,{children:"Then:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle install\n"})}),"\n",(0,r.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-compile-t-ruby-code",children:"Step 1: Compile T-Ruby Code"}),"\n",(0,r.jsx)(n.p,{children:"First, compile your T-Ruby code to generate Ruby and RBS files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc compile src/\n"})}),"\n",(0,r.jsx)(n.p,{children:"This creates:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"build/          # Compiled Ruby files\nsig/            # RBS type signatures\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-create-steepfile",children:"Step 2: Create Steepfile"}),"\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.code,{children:"Steepfile"})," to configure Steep:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",metastring:'title="Steepfile"',children:'target :app do\n  # Check compiled Ruby files\n  check "build"\n\n  # Use T-Ruby generated signatures\n  signature "sig"\n\n  # Use Ruby standard library types\n  library "pathname"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-run-steep",children:"Step 3: Run Steep"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep check\n"})}),"\n",(0,r.jsx)(n.p,{children:"Steep verifies that your compiled Ruby code matches the generated RBS signatures."}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsx)(n.p,{children:"Let's walk through a complete example."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"T-Ruby source"})," (",(0,r.jsx)(n.code,{children:"src/user.trb"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-trb",children:'class User\n  @id: Integer\n  @name: String\n  @email: String\n\n  def initialize(id: Integer, name: String, email: String): void\n    @id = id\n    @name = name\n    @email = email\n  end\n\n  def greet: String\n    "Hello, I\'m #{@name}!"\n  end\n\n  def self.find(id: Integer): User | nil\n    # Database lookup would go here\n    nil\n  end\nend\n\n# Using the class\nuser = User.new(1, "Alice", "alice@example.com")\nputs user.greet\n\n# This would be a type error\n# user = User.new("not a number", "Bob", "bob@example.com")\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Compile"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc compile src/\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configure Steep"})," (",(0,r.jsx)(n.code,{children:"Steepfile"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\nend\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Run Steep"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep check\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Type checking files:\n\nbuild/user.rb:19:8: [error] Type mismatch:\n  expected: Integer\n  actual: String\n\n# Typecheck result: FAILURE\n"})}),"\n",(0,r.jsx)(n.h2,{id:"steepfile-configuration",children:"Steepfile Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"basic-structure",children:"Basic Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "path/to/ruby/files"\n  signature "path/to/rbs/files"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"multiple-targets",children:"Multiple Targets"}),"\n",(0,r.jsx)(n.p,{children:"For larger projects, use multiple targets:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'# Application code\ntarget :app do\n  check "build/app"\n  signature "sig/app"\n\n  library "pathname", "logger"\nend\n\n# Tests\ntarget :test do\n  check "build/test"\n  signature "sig/test", "sig/app"\n\n  library "pathname", "logger", "minitest"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"libraries",children:"Libraries"}),"\n",(0,r.jsx)(n.p,{children:"Include RBS for Ruby standard library and gems:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\n\n  # Standard library\n  library "pathname"\n  library "json"\n  library "net-http"\n\n  # Gems with RBS support\n  library "activerecord"\n  library "activesupport"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"type-resolution",children:"Type Resolution"}),"\n",(0,r.jsx)(n.p,{children:"Configure how Steep resolves types:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\n\n  # Ignore specific files\n  ignore "build/vendor/**/*.rb"\n\n  # Configure type checking strictness\n  configure_code_diagnostics do |hash|\n    hash[D::UnresolvedOverloading] = :information\n    hash[D::FallbackAny] = :warning\n  end\nend\n'})}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-t-ruby-workflow",children:"Integration with T-Ruby Workflow"}),"\n",(0,r.jsx)(n.h3,{id:"development-workflow",children:"Development Workflow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 1. Write T-Ruby code\nvim src/user.trb\n\n# 2. Compile with T-Ruby (catches T-Ruby type errors)\ntrc compile src/\n\n# 3. Check with Steep (validates Ruby output)\nsteep check\n\n# 4. Run the code\nruby build/user.rb\n"})}),"\n",(0,r.jsx)(n.h3,{id:"watch-mode",children:"Watch Mode"}),"\n",(0,r.jsx)(n.p,{children:"Use both T-Ruby watch and Steep watch together:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Terminal 1"})," - T-Ruby watch:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc watch src/ --clear\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Terminal 2"})," - Steep watch:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep watch --code=build --signature=sig\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now both will automatically recheck as you edit files."}),"\n",(0,r.jsx)(n.h3,{id:"single-command-workflow",children:"Single Command Workflow"}),"\n",(0,r.jsx)(n.p,{children:"Create a script to run both:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="bin/typecheck"',children:'#!/bin/bash\nset -e\n\necho "Compiling T-Ruby..."\ntrc compile src/\n\necho "Running Steep..."\nsteep check\n\necho "Type checking passed!"\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"chmod +x bin/typecheck\n./bin/typecheck\n"})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"strict-mode",children:"Strict Mode"}),"\n",(0,r.jsx)(n.p,{children:"Enable strict type checking in Steep:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\n\n  # Strict mode - fail on any type issues\n  configure_code_diagnostics do |hash|\n    hash[D::FallbackAny] = :error\n    hash[D::UnresolvedOverloading] = :error\n    hash[D::UnexpectedBlockGiven] = :error\n    hash[D::IncompatibleMethodTypeAnnotation] = :error\n  end\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"custom-type-directories",children:"Custom Type Directories"}),"\n",(0,r.jsx)(n.p,{children:"If you have hand-written RBS alongside T-Ruby generated ones:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n\n  # T-Ruby generated signatures\n  signature "sig/generated"\n\n  # Hand-written signatures\n  signature "sig/manual"\n\n  # Vendor signatures\n  signature "sig/vendor"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"rails-integration",children:"Rails Integration"}),"\n",(0,r.jsx)(n.p,{children:"For Rails projects:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "app"\n\n  signature "sig"\n\n  # Rails core libraries\n  library "pathname"\n  library "logger"\n\n  # Rails gems\n  library "activerecord"\n  library "actionpack"\n  library "activesupport"\n  library "actionview"\n\n  # Configure Rails paths\n  repo_path "vendor/rbs-rails"\nend\n\n# Configure for Rails autoloading\nconfigure_code_diagnostics do |hash|\n  # Rails uses autoloading - be lenient with constants\n  hash[D::UnknownConstant] = :hint\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ignore-patterns",children:"Ignore Patterns"}),"\n",(0,r.jsx)(n.p,{children:"Ignore generated or vendor code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\n\n  # Ignore specific patterns\n  ignore "build/vendor/**/*.rb"\n  ignore "build/generated/**/*.rb"\n  ignore "build/**/*_pb.rb"  # Protocol buffer generated files\nend\n'})}),"\n",(0,r.jsx)(n.h2,{id:"diagnostic-configuration",children:"Diagnostic Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Customize Steep's diagnostic levels:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  signature "sig"\n\n  configure_code_diagnostics do |hash|\n    # Errors\n    hash[D::UnresolvedOverloading] = :error\n    hash[D::FallbackAny] = :error\n\n    # Warnings\n    hash[D::UnexpectedBlockGiven] = :warning\n    hash[D::IncompatibleAssignment] = :warning\n\n    # Information\n    hash[D::UnknownConstant] = :information\n\n    # Hints (lowest severity)\n    hash[D::UnsatisfiedConstraints] = :hint\n\n    # Disable specific diagnostics\n    hash[D::UnexpectedJumpValue] = nil\n  end\nend\n'})}),"\n",(0,r.jsx)(n.h2,{id:"common-diagnostics",children:"Common Diagnostics"}),"\n",(0,r.jsx)(n.h3,{id:"unresolvedoverloading",children:"UnresolvedOverloading"}),"\n",(0,r.jsx)(n.p,{children:"Multiple method overloads, Steep can't determine which one:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rbs",children:"# In RBS\ndef process: (String) -> Integer\n           | (Integer) -> String\n\n# Steep may report UnresolvedOverloading\nresult = process(input)  # Type of input unclear\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Add type annotation or make types clearer."]}),"\n",(0,r.jsx)(n.h3,{id:"fallbackany",children:"FallbackAny"}),"\n",(0,r.jsxs)(n.p,{children:["Steep can't infer a type and falls back to ",(0,r.jsx)(n.code,{children:"Any"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"result = some_method()  # Type unknown, falls back to Any\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Add explicit types in T-Ruby source."]}),"\n",(0,r.jsx)(n.h3,{id:"incompatibleassignment",children:"IncompatibleAssignment"}),"\n",(0,r.jsx)(n.p,{children:"Type mismatch in assignment:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-trb",children:'x: Integer = "string"  # Error: incompatible types\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Correct the type in T-Ruby source."]}),"\n",(0,r.jsx)(n.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,r.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".github/workflows/typecheck.yml"',children:"name: Type Check\n\non: [push, pull_request]\n\njobs:\n  typecheck:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up Ruby\n        uses: ruby/setup-ruby@v1\n        with:\n          ruby-version: '3.2'\n          bundler-cache: true\n\n      - name: Install T-Ruby\n        run: gem install t-ruby\n\n      - name: Compile T-Ruby\n        run: trc compile src/\n\n      - name: Type Check with Steep\n        run: bundle exec steep check\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gitlab-ci",children:"GitLab CI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".gitlab-ci.yml"',children:"typecheck:\n  image: ruby:3.2\n  before_script:\n    - gem install t-ruby\n    - bundle install\n  script:\n    - trc compile src/\n    - bundle exec steep check\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pre-commit-hook",children:"Pre-commit Hook"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title=".git/hooks/pre-commit"',children:'#!/bin/sh\n\necho "Type checking with T-Ruby and Steep..."\n\n# Compile T-Ruby\ntrc compile src/ || exit 1\n\n# Check with Steep\nsteep check || exit 1\n\necho "Type check passed!"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"steep-commands",children:"Steep Commands"}),"\n",(0,r.jsx)(n.h3,{id:"check",children:"Check"}),"\n",(0,r.jsx)(n.p,{children:"Type check your code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep check\n"})}),"\n",(0,r.jsx)(n.p,{children:"With specific target:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep check --target=app\n"})}),"\n",(0,r.jsx)(n.h3,{id:"watch",children:"Watch"}),"\n",(0,r.jsx)(n.p,{children:"Watch for changes and recheck:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep watch\n"})}),"\n",(0,r.jsx)(n.p,{children:"Specify paths:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep watch --code=build --signature=sig\n"})}),"\n",(0,r.jsx)(n.h3,{id:"stats",children:"Stats"}),"\n",(0,r.jsx)(n.p,{children:"Show type checking statistics:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep stats\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Target: app\n  Files: 25\n  Methods: 147\n  Classes: 18\n  Modules: 5\n  Type errors: 0\n  Warnings: 3\n"})}),"\n",(0,r.jsx)(n.h3,{id:"validate",children:"Validate"}),"\n",(0,r.jsx)(n.p,{children:"Validate Steepfile:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep validate\n"})}),"\n",(0,r.jsx)(n.h3,{id:"version",children:"Version"}),"\n",(0,r.jsx)(n.p,{children:"Show Steep version:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep version\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"steep-cant-find-rbs-files",children:"Steep Can't Find RBS Files"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Steep reports missing type signatures."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Verify RBS files exist and Steepfile paths are correct:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check RBS files were generated\nls -la sig/\n\n# Verify Steepfile paths\ncat Steepfile\n"})}),"\n",(0,r.jsx)(n.h3,{id:"type-mismatches",children:"Type Mismatches"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Steep reports type errors in generated code."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check T-Ruby compilation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc check src/\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"View generated RBS:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cat sig/user.rbs\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ensure types match:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc compile --trace src/\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"library-not-found",children:"Library Not Found"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Steep can't find library types."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Install RBS collection or add library to Steepfile:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Initialize RBS collection\nrbs collection init\n\n# Install dependencies\nrbs collection install\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'# In Steepfile\ntarget :app do\n  signature "sig"\n  library "pathname", "json"\nend\n'})}),"\n",(0,r.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Steep is slow on large projects."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use multiple targets:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :core do\n  check "build/core"\n  signature "sig/core"\nend\n\ntarget :plugins do\n  check "build/plugins"\n  signature "sig/plugins"\nend\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ignore unnecessary files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'target :app do\n  check "build"\n  ignore "build/vendor/**"\nend\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-run-steep-in-ci",children:"1. Run Steep in CI"}),"\n",(0,r.jsx)(n.p,{children:"Always run Steep in CI to catch type errors:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"- name: Type Check\n  run: |\n    trc compile src/\n    steep check\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-steep-watch-during-development",children:"2. Use Steep Watch During Development"}),"\n",(0,r.jsx)(n.p,{children:"Keep Steep running to get immediate feedback:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"steep watch --code=build --signature=sig\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-configure-diagnostics-appropriately",children:"3. Configure Diagnostics Appropriately"}),"\n",(0,r.jsx)(n.p,{children:"Start permissive, increase strictness over time:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"# Start here\nconfigure_code_diagnostics do |hash|\n  hash[D::FallbackAny] = :warning\nend\n\n# Move to this\nconfigure_code_diagnostics do |hash|\n  hash[D::FallbackAny] = :error\nend\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-keep-rbs-files-in-version-control",children:"4. Keep RBS Files in Version Control"}),"\n",(0,r.jsx)(n.p,{children:"Commit generated RBS files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'git add sig/\ngit commit -m "Update RBS signatures"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-use-both-t-ruby-and-steep-checks",children:"5. Use Both T-Ruby and Steep Checks"}),"\n",(0,r.jsx)(n.p,{children:"T-Ruby catches issues at compile time, Steep validates runtime behavior:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trc check src/     # Compile-time check\ntrc compile src/   # Generate Ruby + RBS\nsteep check        # Runtime behavior check\n"})}),"\n",(0,r.jsx)(n.h2,{id:"steep-vs-t-ruby-type-checking",children:"Steep vs T-Ruby Type Checking"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"T-Ruby"}),(0,r.jsx)(n.th,{children:"Steep"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"When"}),(0,r.jsx)(n.td,{children:"Compile time"}),(0,r.jsx)(n.td,{children:"After compilation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"What"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:".trb"})," files"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:".rb"})," and ",(0,r.jsx)(n.code,{children:".rbs"})," files"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Purpose"}),(0,r.jsx)(n.td,{children:"Type safety in T-Ruby code"}),(0,r.jsx)(n.td,{children:"Validate Ruby output"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Errors"}),(0,r.jsx)(n.td,{children:"Prevents compilation"}),(0,r.jsx)(n.td,{children:"Reports issues"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Speed"}),(0,r.jsx)(n.td,{children:"Fast (single file)"}),(0,r.jsx)(n.td,{children:"Slower (whole project)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Integration"}),(0,r.jsx)(n.td,{children:"Built-in"}),(0,r.jsx)(n.td,{children:"Separate tool"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use both"}),": T-Ruby for development, Steep for validation."]}),"\n",(0,r.jsx)(n.h2,{id:"real-world-example",children:"Real-World Example"}),"\n",(0,r.jsx)(n.p,{children:"Complete setup for a production application:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",metastring:'title="Steepfile"',children:'target :app do\n  check "build/app"\n  signature "sig/app"\n\n  library "pathname"\n  library "logger"\n  library "json"\n  library "net-http"\n\n  ignore "build/app/vendor/**"\n\n  configure_code_diagnostics do |hash|\n    hash[D::FallbackAny] = :error\n    hash[D::UnresolvedOverloading] = :warning\n    hash[D::IncompatibleAssignment] = :error\n  end\nend\n\ntarget :test do\n  check "build/test"\n  signature "sig/app", "sig/test"\n\n  library "minitest"\n\n  configure_code_diagnostics do |hash|\n    hash[D::FallbackAny] = :warning  # More lenient for tests\n  end\nend\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="trbconfig.yml"',children:"source:\n  include:\n    - src/app\n    - src/test\n\noutput:\n  ruby_dir: build\n  rbs_dir: sig\n  preserve_structure: true\n\ncompiler:\n  strictness: strict\n  generate_rbs: true\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="bin/ci"',children:'#!/bin/bash\nset -e\n\necho "==> Compiling T-Ruby..."\ntrc compile src/app --strict\n\necho "==> Type checking with Steep..."\nsteep check --target=app\n\necho "==> Running tests..."\nruby -Ibuild/test -Ibuild/app build/test/all_tests.rb\n\necho "==> All checks passed!"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/tooling/ruby-lsp",children:"Ruby LSP Integration"})," - IDE support with Steep"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/tooling/rbs-integration",children:"RBS Integration"})," - Learn more about RBS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/soutaro/steep",children:"Steep Documentation"})," - Official Steep docs"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8885:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(9378);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);