"use strict";(globalThis.webpackChunkt_ruby_docs=globalThis.webpackChunkt_ruby_docs||[]).push([[3374],{8885:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>t});var r=i(9378);const s={},l=r.createContext(s);function c(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(l.Provider,{value:n},e.children)}},9941:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"cli/configuration","title":"Configuration","description":"T-Ruby configuration file reference","source":"@site/docs/cli/configuration.md","sourceDirName":"cli","slug":"/cli/configuration","permalink":"/docs/cli/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/type-ruby/t-ruby.github.io/tree/main/docs/cli/configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Configuration","description":"T-Ruby configuration file reference"},"sidebar":"docsSidebar","previous":{"title":"Commands","permalink":"/docs/cli/commands"},"next":{"title":"Compiler Options","permalink":"/docs/cli/compiler-options"}}');var s=i(2714),l=i(8885);const c={sidebar_position:2,title:"Configuration",description:"T-Ruby configuration file reference"},t="Configuration",a={},o=[{value:"Configuration File",id:"configuration-file",level:2},{value:"Creating Configuration",id:"creating-configuration",level:2},{value:"Configuration Sections",id:"configuration-sections",level:2},{value:"version",id:"version",level:3},{value:"source",id:"source",level:3},{value:"output",id:"output",level:3},{value:"preserve_structure",id:"preserve_structure",level:4},{value:"clean_before_build",id:"clean_before_build",level:4},{value:"compiler",id:"compiler",level:3},{value:"strictness",id:"strictness",level:4},{value:"target_ruby",id:"target_ruby",level:4},{value:"checks",id:"checks",level:4},{value:"experimental",id:"experimental",level:4},{value:"optimization",id:"optimization",level:4},{value:"watch",id:"watch",level:3},{value:"types",id:"types",level:3},{value:"paths",id:"paths",level:4},{value:"external",id:"external",level:4},{value:"stdlib",id:"stdlib",level:4},{value:"plugins",id:"plugins",level:3},{value:"linting",id:"linting",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Multiple Configuration Files",id:"multiple-configuration-files",level:2},{value:"Configuration Inheritance",id:"configuration-inheritance",level:2},{value:"Workspace Configuration",id:"workspace-configuration",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Configuration Schema",id:"configuration-schema",level:2},{value:"Debugging Configuration",id:"debugging-configuration",level:2},{value:"Migration Guide",id:"migration-guide",level:2},{value:"From version 0.x to 1.x",id:"from-version-0x-to-1x",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use strictness appropriate for project stage",id:"1-use-strictness-appropriate-for-project-stage",level:3},{value:"2. Enable useful checks incrementally",id:"2-enable-useful-checks-incrementally",level:3},{value:"3. Use environment-specific configs",id:"3-use-environment-specific-configs",level:3},{value:"4. Document custom configuration",id:"4-document-custom-configuration",level:3},{value:"5. Keep configuration in version control",id:"5-keep-configuration-in-version-control",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{DocsBadge:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("DocsBadge",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,s.jsxs)(n.p,{children:["T-Ruby uses a ",(0,s.jsx)(n.code,{children:"trc.yaml"})," file to configure compiler behavior, source files, output locations, and type checking rules. This reference covers all available configuration options."]}),"\n",(0,s.jsx)(n.h2,{id:"configuration-file",children:"Configuration File"}),"\n",(0,s.jsxs)(n.p,{children:["Place ",(0,s.jsx)(n.code,{children:"trc.yaml"})," in your project root:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="trc.yaml"',children:'# T-Ruby configuration file\nversion: ">=1.0.0"\n\nsource:\n  include:\n    - src\n    - lib\n  exclude:\n    - "**/*_test.trb"\n\noutput:\n  ruby_dir: build\n  rbs_dir: sig\n  preserve_structure: true\n\ncompiler:\n  strictness: standard\n  generate_rbs: true\n  target_ruby: "3.2"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"creating-configuration",children:"Creating Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Generate a configuration file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create with defaults\ntrc init\n\n# Interactive setup\ntrc init --interactive\n\n# Use template\ntrc init --template rails\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-sections",children:"Configuration Sections"}),"\n",(0,s.jsx)(n.h3,{id:"version",children:"version"}),"\n",(0,s.jsx)(n.p,{children:"Specify the minimum T-Ruby compiler version required:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'version: ">=1.0.0"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Supported formats:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'version: "1.0.0"        # Exact version\nversion: ">=1.0.0"      # Minimum version\nversion: "~>1.0"        # Compatible version\nversion: ">=1.0,<2.0"   # Range\n'})}),"\n",(0,s.jsx)(n.h3,{id:"source",children:"source"}),"\n",(0,s.jsx)(n.p,{children:"Configure which files to compile:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'source:\n  # Directories to include\n  include:\n    - src\n    - lib\n    - app\n\n  # Patterns to exclude\n  exclude:\n    - "**/*_test.trb"\n    - "**/*_spec.trb"\n    - "**/fixtures/**"\n    - "**/tmp/**"\n\n  # File extensions (default: [".trb"])\n  extensions:\n    - .trb\n    - .truby\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Include paths"})," can be:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Directories: ",(0,s.jsx)(n.code,{children:"src"}),", ",(0,s.jsx)(n.code,{children:"lib/models"})]}),"\n",(0,s.jsxs)(n.li,{children:["Glob patterns: ",(0,s.jsx)(n.code,{children:"src/**/*.trb"})]}),"\n",(0,s.jsxs)(n.li,{children:["Individual files: ",(0,s.jsx)(n.code,{children:"app/main.trb"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Exclude patterns"})," support:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Wildcards: ",(0,s.jsx)(n.code,{children:"**/test/**"}),", ",(0,s.jsx)(n.code,{children:"*_spec.trb"})]}),"\n",(0,s.jsxs)(n.li,{children:["Negation: ",(0,s.jsx)(n.code,{children:"!important_test.trb"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example with complex patterns:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'source:\n  include:\n    - src\n    - lib\n    - "config/**/*.trb"  # Include config files\n\n  exclude:\n    # Exclude all test files\n    - "**/*_test.trb"\n    - "**/*_spec.trb"\n\n    # Exclude vendor code\n    - "**/vendor/**"\n    - "**/node_modules/**"\n\n    # Exclude generated files\n    - "**/generated/**"\n    - "**/*.generated.trb"\n\n    # But include specific test\n    - "!test/important_integration_test.trb"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"output",children:"output"}),"\n",(0,s.jsx)(n.p,{children:"Configure where compiled files are written:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"output:\n  # Directory for compiled Ruby files\n  ruby_dir: build\n\n  # Directory for RBS signature files\n  rbs_dir: sig\n\n  # Preserve source directory structure\n  preserve_structure: true\n\n  # Clean output directory before build\n  clean_before_build: false\n\n  # File extension for Ruby output (default: .rb)\n  ruby_extension: .rb\n\n  # File extension for RBS output (default: .rbs)\n  rbs_extension: .rbs\n"})}),"\n",(0,s.jsx)(n.h4,{id:"preserve_structure",children:"preserve_structure"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"true"}),", maintains source directory hierarchy:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"preserve_structure: true\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 models/\n\u2502   \u2514\u2500\u2500 user.trb\n\u2514\u2500\u2500 services/\n    \u2514\u2500\u2500 auth.trb\n"})}),"\n",(0,s.jsx)(n.p,{children:"Compiles to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"build/\n\u251c\u2500\u2500 models/\n\u2502   \u2514\u2500\u2500 user.rb\n\u2514\u2500\u2500 services/\n    \u2514\u2500\u2500 auth.rb\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"false"}),", flattens output:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"preserve_structure: false\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"build/\n\u251c\u2500\u2500 user.rb\n\u2514\u2500\u2500 auth.rb\n"})}),"\n",(0,s.jsx)(n.h4,{id:"clean_before_build",children:"clean_before_build"}),"\n",(0,s.jsx)(n.p,{children:"Remove all files in output directories before compilation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"output:\n  clean_before_build: true  # Clean build/ and sig/ before compile\n"})}),"\n",(0,s.jsx)(n.p,{children:"Useful for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Removing orphaned files"}),"\n",(0,s.jsx)(n.li,{children:"Ensuring clean builds in CI"}),"\n",(0,s.jsx)(n.li,{children:"Avoiding conflicts with renamed files"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"compiler",children:"compiler"}),"\n",(0,s.jsx)(n.p,{children:"Configure compiler behavior and type checking:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'compiler:\n  # Strictness level\n  strictness: standard\n\n  # Generate RBS files\n  generate_rbs: true\n\n  # Target Ruby version\n  target_ruby: "3.2"\n\n  # Type checking options\n  checks:\n    no_implicit_any: true\n    no_unused_vars: false\n    strict_nil: true\n    no_unchecked_indexed_access: false\n\n  # Experimental features\n  experimental:\n    - pattern_matching_types\n    - refinement_types\n\n  # Optimization level\n  optimization: none\n'})}),"\n",(0,s.jsx)(n.h4,{id:"strictness",children:"strictness"}),"\n",(0,s.jsx)(n.p,{children:"Controls type checking rigor:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  strictness: strict  # strict | standard | permissive\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"strict"})," - Maximum type safety:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All functions must have parameter and return types"}),"\n",(0,s.jsx)(n.li,{children:"All instance variables must be typed"}),"\n",(0,s.jsx)(n.li,{children:"All local variables must be explicitly typed or inferred"}),"\n",(0,s.jsxs)(n.li,{children:["No implicit ",(0,s.jsx)(n.code,{children:"any"})," types allowed"]}),"\n",(0,s.jsx)(n.li,{children:"Strict nil checking enabled"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# Required in strict mode\ndef process(data: Array<String>): Hash<String, Integer>\n  @count: Integer = 0\n  result: Hash<String, Integer> = {}\n  # ...\nend\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"standard"})," (recommended) - Balanced approach:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Public API methods must be typed"}),"\n",(0,s.jsx)(n.li,{children:"Private methods can omit types (inferred)"}),"\n",(0,s.jsx)(n.li,{children:"Instance variables must be typed"}),"\n",(0,s.jsx)(n.li,{children:"Local variables can be inferred"}),"\n",(0,s.jsxs)(n.li,{children:["Warns on implicit ",(0,s.jsx)(n.code,{children:"any"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# OK in standard mode\ndef process(data: Array<String>): Hash<String, Integer>\n  @count: Integer = 0\n  result = {}  # Type inferred\n  # ...\nend\n\nprivate\n\ndef helper(x)  # Private, type inferred\n  x * 2\nend\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"permissive"})," - Gradual typing:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only explicit type errors are caught"}),"\n",(0,s.jsxs)(n.li,{children:["Implicit ",(0,s.jsx)(n.code,{children:"any"})," types allowed"]}),"\n",(0,s.jsx)(n.li,{children:"Useful for migrating existing code"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",children:"# OK in permissive mode\ndef process(data)\n  @count = 0\n  result = {}\n  # ...\nend\n"})}),"\n",(0,s.jsx)(n.h4,{id:"target_ruby",children:"target_ruby"}),"\n",(0,s.jsx)(n.p,{children:"Generate code compatible with specific Ruby versions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'compiler:\n  target_ruby: "3.2"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Affects:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Syntax features used in output"}),"\n",(0,s.jsx)(n.li,{children:"Standard library type definitions"}),"\n",(0,s.jsx)(n.li,{children:"Method availability checks"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Supported versions: ",(0,s.jsx)(n.code,{children:'"2.7"'}),", ",(0,s.jsx)(n.code,{children:'"3.0"'}),", ",(0,s.jsx)(n.code,{children:'"3.1"'}),", ",(0,s.jsx)(n.code,{children:'"3.2"'}),", ",(0,s.jsx)(n.code,{children:'"3.3"'})]}),"\n",(0,s.jsx)(n.p,{children:"Example - Pattern matching:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# Input (.trb)\ncase value\nin { name: String => n }\n  puts n\nend\n"})}),"\n",(0,s.jsxs)(n.p,{children:["With ",(0,s.jsx)(n.code,{children:'target_ruby: "3.0"'}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",children:"# Uses pattern matching (Ruby 3.0+)\ncase value\nin { name: n }\n  puts n\nend\n"})}),"\n",(0,s.jsxs)(n.p,{children:["With ",(0,s.jsx)(n.code,{children:'target_ruby: "2.7"'}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",children:"# Falls back to case/when\ncase\nwhen value.is_a?(Hash) && value[:name].is_a?(String)\n  n = value[:name]\n  puts n\nend\n"})}),"\n",(0,s.jsx)(n.h4,{id:"checks",children:"checks"}),"\n",(0,s.jsx)(n.p,{children:"Fine-grained type checking rules:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  checks:\n    # Disallow implicit 'any' types\n    no_implicit_any: true\n\n    # Warn on unused variables\n    no_unused_vars: true\n\n    # Strict nil checking\n    strict_nil: true\n\n    # Check indexed access (arrays, hashes)\n    no_unchecked_indexed_access: true\n\n    # Require explicit return types\n    require_return_types: false\n\n    # Disallow untyped function calls\n    no_untyped_calls: false\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"no_implicit_any"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# Error when no_implicit_any: true\ndef process(data)  # Error: implicit 'any' type\n  # ...\nend\n\n# OK\ndef process(data: Any)  # Explicit any\n  # ...\nend\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"no_unused_vars"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# Warning when no_unused_vars: true\ndef calculate(x: Integer, y: Integer): Integer\n  result = x * 2  # Warning: 'y' is unused\n  result\nend\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"strict_nil"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# Error when strict_nil: true\ndef find_user(id: Integer): User  # Error: might return nil\n  users.find { |u| u.id == id }\nend\n\n# OK\ndef find_user(id: Integer): User | nil\n  users.find { |u| u.id == id }\nend\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"no_unchecked_indexed_access"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-trb",children:"# Error when no_unchecked_indexed_access: true\nusers: Array<User> = get_users()\nuser = users[0]  # Error: might be nil\n\n# OK - Check first\nif users[0]\n  user = users[0]  # Safe\nend\n\n# Or use fetch with default\nuser = users.fetch(0, default_user)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"experimental",children:"experimental"}),"\n",(0,s.jsx)(n.p,{children:"Enable experimental features:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  experimental:\n    - pattern_matching_types\n    - refinement_types\n    - variadic_generics\n    - higher_kinded_types\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Warning:"})," Experimental features may change or be removed in future versions."]}),"\n",(0,s.jsx)(n.h4,{id:"optimization",children:"optimization"}),"\n",(0,s.jsx)(n.p,{children:"Control code optimization level:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  optimization: none  # none | basic | aggressive\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"none"})," - No optimization, preserve readability"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"basic"})," - Safe optimizations (inline constants, remove dead code)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"aggressive"})," - Maximum optimization (may reduce readability)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"watch",children:"watch"}),"\n",(0,s.jsx)(n.p,{children:"Configure watch mode behavior:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'watch:\n  # Additional paths to watch\n  paths:\n    - config\n    - types\n\n  # Debounce delay in milliseconds\n  debounce: 100\n\n  # Clear screen on rebuild\n  clear_screen: true\n\n  # Run command after successful compile\n  on_success: "bundle exec rspec"\n\n  # Run command after failed compile\n  on_failure: "notify-send \'Build failed\'"\n\n  # Ignore patterns\n  ignore:\n    - "**/tmp/**"\n    - "**/.git/**"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Example - Run tests after compile:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'watch:\n  on_success: "bundle exec rake test"\n  clear_screen: true\n  debounce: 200\n'})}),"\n",(0,s.jsx)(n.h3,{id:"types",children:"types"}),"\n",(0,s.jsx)(n.p,{children:"Configure type resolution and imports:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"types:\n  # Additional type definition directories\n  paths:\n    - types\n    - vendor/types\n    - custom_types\n\n  # Auto-import standard library types\n  stdlib: true\n\n  # External type definitions\n  external:\n    - rails\n    - rspec\n    - activerecord\n\n  # Type aliases\n  aliases:\n    UserId: Integer\n    Timestamp: Integer\n\n  # Strict mode for type imports\n  strict_imports: false\n"})}),"\n",(0,s.jsx)(n.h4,{id:"paths",children:"paths"}),"\n",(0,s.jsxs)(n.p,{children:["Directories containing ",(0,s.jsx)(n.code,{children:".rbs"})," type definition files:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"types:\n  paths:\n    - types          # Project-specific types\n    - vendor/types   # Third-party types\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"types/\n\u251c\u2500\u2500 custom.rbs\n\u2514\u2500\u2500 external/\n    \u2514\u2500\u2500 third_party.rbs\n"})}),"\n",(0,s.jsx)(n.h4,{id:"external",children:"external"}),"\n",(0,s.jsx)(n.p,{children:"Import type definitions for libraries:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"types:\n  external:\n    - rails\n    - rspec\n    - sidekiq\n"})}),"\n",(0,s.jsx)(n.p,{children:"T-Ruby will look for these in:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Bundled type definitions"}),"\n",(0,s.jsxs)(n.li,{children:["Gem's ",(0,s.jsx)(n.code,{children:"sig/"})," directory"]}),"\n",(0,s.jsx)(n.li,{children:"RBS repository"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"stdlib",children:"stdlib"}),"\n",(0,s.jsx)(n.p,{children:"Include Ruby standard library types:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"types:\n  stdlib: true  # Import Array, Hash, String, etc.\n"})}),"\n",(0,s.jsx)(n.h3,{id:"plugins",children:"plugins"}),"\n",(0,s.jsx)(n.p,{children:"Extend T-Ruby with plugins:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"plugins:\n  # Custom plugins\n  - name: my_custom_plugin\n    path: ./plugins/custom.rb\n    options:\n      setting: value\n\n  # Built-in plugins\n  - name: rails_types\n    enabled: true\n\n  - name: graphql_types\n    enabled: true\n"})}),"\n",(0,s.jsx)(n.h3,{id:"linting",children:"linting"}),"\n",(0,s.jsx)(n.p,{children:"Configure linting rules:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"linting:\n  # Enable linter\n  enabled: true\n\n  # Rules configuration\n  rules:\n    # Naming conventions\n    naming_convention: snake_case\n    class_naming: PascalCase\n    constant_naming: SCREAMING_SNAKE_CASE\n\n    # Complexity\n    max_method_lines: 50\n    max_class_lines: 300\n    max_complexity: 10\n\n    # Style\n    prefer_single_quotes: true\n    require_trailing_comma: false\n\n  # Disable specific rules\n  disabled_rules:\n    - prefer_ternary\n    - max_line_length\n"})}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(n.p,{children:"Override configuration with environment variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  strictness: ${TRC_STRICTNESS:-standard}\n  target_ruby: ${RUBY_VERSION:-3.2}\n\noutput:\n  ruby_dir: ${TRC_OUTPUT_DIR:-build}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Usage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"TRC_STRICTNESS=strict trc compile .\nRUBY_VERSION=3.0 trc compile .\n"})}),"\n",(0,s.jsx)(n.h2,{id:"multiple-configuration-files",children:"Multiple Configuration Files"}),"\n",(0,s.jsx)(n.p,{children:"Use different configs for different environments:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Development\ntrc --config trc.development.yaml compile\n\n# Production\ntrc --config trc.production.yaml compile\n\n# Testing\ntrc --config trc.test.yaml check\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"trc.development.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'compiler:\n  strictness: permissive\n  checks:\n    no_unused_vars: false\n\nwatch:\n  on_success: "bundle exec rspec"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"trc.production.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  strictness: strict\n  optimization: aggressive\n  checks:\n    no_implicit_any: true\n    no_unused_vars: true\n\noutput:\n  clean_before_build: true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-inheritance",children:"Configuration Inheritance"}),"\n",(0,s.jsx)(n.p,{children:"Create base configuration and extend it:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"trc.base.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'compiler:\n  target_ruby: "3.2"\n  generate_rbs: true\n\ntypes:\n  stdlib: true\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"trc.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"extends: trc.base.yaml\n\ncompiler:\n  strictness: standard\n\nsource:\n  include:\n    - src\n"})}),"\n",(0,s.jsx)(n.h2,{id:"workspace-configuration",children:"Workspace Configuration"}),"\n",(0,s.jsx)(n.p,{children:"For monorepos with multiple packages:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"trc.workspace.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'workspace:\n  # Package locations\n  packages:\n    - packages/core\n    - packages/web\n    - packages/api\n\n  # Shared configuration\n  shared:\n    compiler:\n      target_ruby: "3.2"\n      strictness: strict\n\n  # Per-package overrides\n  overrides:\n    packages/web:\n      compiler:\n        strictness: standard\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Each package has its own ",(0,s.jsx)(n.code,{children:"trc.yaml"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"packages/core/trc.yaml:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"source:\n  include:\n    - lib\n\noutput:\n  ruby_dir: lib\n  rbs_dir: sig\n"})}),"\n",(0,s.jsx)(n.p,{children:"Build workspace:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"trc --workspace compile\n"})}),"\n",(0,s.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsx)(n.p,{children:"A comprehensive configuration for a Rails application:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="trc.yaml"',children:'# T-Ruby Configuration for Rails App\nversion: ">=1.2.0"\n\n# Source files\nsource:\n  include:\n    - app/models\n    - app/controllers\n    - app/services\n    - app/jobs\n    - lib\n\n  exclude:\n    - "**/*_test.trb"\n    - "**/*_spec.trb"\n    - "**/concerns/**"  # Keep as Ruby\n    - "**/vendor/**"\n\n  extensions:\n    - .trb\n\n# Output\noutput:\n  ruby_dir: app\n  rbs_dir: sig\n  preserve_structure: true\n  clean_before_build: false\n\n# Compiler\ncompiler:\n  strictness: standard\n  generate_rbs: true\n  target_ruby: "3.2"\n\n  checks:\n    no_implicit_any: true\n    strict_nil: true\n    no_unused_vars: true\n    no_unchecked_indexed_access: false\n\n  experimental: []\n\n  optimization: basic\n\n# Watch mode\nwatch:\n  paths:\n    - config\n    - app\n\n  debounce: 150\n  clear_screen: true\n  on_success: "bin/rails test"\n\n  ignore:\n    - "**/tmp/**"\n    - "**/log/**"\n\n# Types\ntypes:\n  paths:\n    - types\n    - vendor/types\n\n  stdlib: true\n\n  external:\n    - rails\n    - activerecord\n    - actionpack\n    - activesupport\n\n# Linting\nlinting:\n  enabled: true\n\n  rules:\n    naming_convention: snake_case\n    class_naming: PascalCase\n    max_method_lines: 50\n    max_class_lines: 300\n    prefer_single_quotes: true\n\n  disabled_rules:\n    - max_line_length\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-schema",children:"Configuration Schema"}),"\n",(0,s.jsx)(n.p,{children:"T-Ruby validates your configuration against a schema. Get the schema:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"trc config --schema > trc-schema.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"Use in your editor for autocomplete and validation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# yaml-language-server: $schema=./trc-schema.json\n\nversion: ">=1.0.0"\n# ... IDE will provide autocomplete\n'})}),"\n",(0,s.jsx)(n.h2,{id:"debugging-configuration",children:"Debugging Configuration"}),"\n",(0,s.jsx)(n.p,{children:"View effective configuration (after merging defaults and overrides):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Show effective config\ntrc config --show\n\n# Show as JSON\ntrc config --show --json\n\n# Validate configuration\ntrc config --validate\n\n# Show configuration sources\ntrc config --debug\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Configuration loaded from:\n  - /path/to/trc.yaml\n  - Environment variables:\n    - TRC_STRICTNESS=standard\n  - Command line:\n    - --target-ruby=3.2\n\nEffective configuration:\n  version: ">=1.0.0"\n  source:\n    include: ["src", "lib"]\n  ...\n'})}),"\n",(0,s.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,s.jsx)(n.h3,{id:"from-version-0x-to-1x",children:"From version 0.x to 1.x"}),"\n",(0,s.jsx)(n.p,{children:"The configuration format changed in version 1.0:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Old (0.x):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"inputs:\n  - src\noutput: build\nrbs_output: sig\nstrict: true\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"New (1.x):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"source:\n  include:\n    - src\noutput:\n  ruby_dir: build\n  rbs_dir: sig\ncompiler:\n  strictness: strict\n"})}),"\n",(0,s.jsx)(n.p,{children:"Auto-migrate:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"trc config --migrate\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-use-strictness-appropriate-for-project-stage",children:"1. Use strictness appropriate for project stage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# New project - start strict\ncompiler:\n  strictness: strict\n\n# Migrating existing project - start permissive\ncompiler:\n  strictness: permissive\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-enable-useful-checks-incrementally",children:"2. Enable useful checks incrementally"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"compiler:\n  checks:\n    # Start with these\n    strict_nil: true\n    no_implicit_any: true\n\n    # Add later as code improves\n    # no_unused_vars: true\n    # no_unchecked_indexed_access: true\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-use-environment-specific-configs",children:"3. Use environment-specific configs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# trc.yaml (default - development)\ncompiler:\n  strictness: standard\n\n# trc.production.yaml\ncompiler:\n  strictness: strict\n  optimization: aggressive\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-document-custom-configuration",children:"4. Document custom configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Custom configuration for our team\n# See docs/truby-setup.md for details\n\ncompiler:\n  # We use strict mode for better type safety\n  strictness: strict\n\n  # Don't warn on unused vars (we use _ prefix)\n  checks:\n    no_unused_vars: false\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-keep-configuration-in-version-control",children:"5. Keep configuration in version control"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'git add trc.yaml\ngit commit -m "Add T-Ruby configuration"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/cli/commands",children:"Commands Reference"})," - Learn CLI commands"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/cli/compiler-options",children:"Compiler Options"})," - Detailed compiler flags"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/learn/basics/type-annotations",children:"Type Annotations"})," - Start typing your code"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);