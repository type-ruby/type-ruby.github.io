"use strict";(globalThis.webpackChunkt_ruby_docs=globalThis.webpackChunkt_ruby_docs||[]).push([[1213],{6145(e,n,r){r.d(n,{R:()=>s,x:()=>c});var i=r(7140);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}},7716(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"getting-started/project-configuration","title":"Project Configuration","description":"Configure T-Ruby for your project","source":"@site/docs/getting-started/project-configuration.md","sourceDirName":"getting-started","slug":"/getting-started/project-configuration","permalink":"/docs/getting-started/project-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/type-ruby/t-ruby.github.io/tree/main/docs/getting-started/project-configuration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Project Configuration","description":"Configure T-Ruby for your project"},"sidebar":"docsSidebar","previous":{"title":"Editor Setup","permalink":"/docs/getting-started/editor-setup"},"next":{"title":"Type Annotations","permalink":"/docs/learn/basics/type-annotations"}}');var t=r(5656),o=r(6145);const s={sidebar_position:5,title:"Project Configuration",description:"Configure T-Ruby for your project"},c="Project Configuration",a={},l=[{value:"Configuration File",id:"configuration-file",level:2},{value:"Initializing a Project",id:"initializing-a-project",level:2},{value:"Configuration Options Reference",id:"configuration-options-reference",level:2},{value:"Source Configuration",id:"source-configuration",level:3},{value:"Output Configuration",id:"output-configuration",level:3},{value:"Compiler Options",id:"compiler-options",level:3},{value:"Watch Mode Configuration",id:"watch-mode-configuration",level:3},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Environment-Specific Configuration",id:"environment-specific-configuration",level:2},{value:"Integration with Bundler",id:"integration-with-bundler",level:2},{value:"Integration with Rails",id:"integration-with-rails",level:2},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"GitHub Actions",id:"github-actions",level:3},{value:"GitLab CI",id:"gitlab-ci",level:3},{value:"Monorepo Configuration",id:"monorepo-configuration",level:2},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{DocsBadge:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("DocsBadge",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{}),"\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"project-configuration",children:"Project Configuration"})}),"\n",(0,t.jsx)(n.p,{children:"For larger projects, T-Ruby uses a configuration file to manage compiler options, paths, and behavior."}),"\n",(0,t.jsx)(n.h2,{id:"configuration-file",children:"Configuration File"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"trbconfig.yml"})," file in your project root:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="trbconfig.yml"',children:'# T-Ruby Configuration\n\n# Compiler version requirement\nversion: ">=1.0.0"\n\n# Source files configuration\nsource:\n  # Directories to include\n  include:\n    - src\n    - lib\n  # Patterns to exclude\n  exclude:\n    - "**/*_test.trb"\n    - "**/fixtures/**"\n\n# Output configuration\noutput:\n  # Where to write compiled .rb and .rbs files\n  ruby_dir: build\n  # Preserve source directory structure\n  preserve_structure: true\n\n# Compiler options\ncompiler:\n  # Strictness level: "strict" | "standard" | "permissive"\n  strictness: standard\n  # Generate .rbs files\n  generate_rbs: true\n  # Target Ruby version\n  target_ruby: "3.0"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"initializing-a-project",children:"Initializing a Project"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"trc --init"})," to create a configuration file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"trc --init\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This creates a ",(0,t.jsx)(n.code,{children:"trbconfig.yml"})," with sensible defaults."]}),"\n",(0,t.jsx)(n.p,{children:"For interactive setup:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"trc --init --interactive\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-options-reference",children:"Configuration Options Reference"}),"\n",(0,t.jsx)(n.h3,{id:"source-configuration",children:"Source Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'source:\n  # Directories containing .trb files\n  include:\n    - src\n    - lib\n    - app\n\n  # Files/patterns to exclude\n  exclude:\n    - "**/*_test.trb"\n    - "**/*_spec.trb"\n    - "**/vendor/**"\n    - "**/node_modules/**"\n\n  # File extensions to process (default: [".trb"])\n  extensions:\n    - .trb\n    - .truby\n'})}),"\n",(0,t.jsx)(n.h3,{id:"output-configuration",children:"Output Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"output:\n  # Directory for compiled .rb and .rbs files\n  ruby_dir: build\n\n  # Separate directory for RBS files (optional, defaults to ruby_dir)\n  # rbs_dir: sig\n\n  # Preserve source directory structure in output\n  # true:  src/models/user.trb \u2192 build/models/user.rb + build/models/user.rbs\n  # false: src/models/user.trb \u2192 build/user.rb + build/user.rbs\n  preserve_structure: true\n\n  # Clean output directory before compilation\n  clean_before_build: false\n"})}),"\n",(0,t.jsx)(n.h3,{id:"compiler-options",children:"Compiler Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'compiler:\n  # Strictness level\n  # - strict: All code must be fully typed\n  # - standard: Types required for public APIs\n  # - permissive: Minimal type requirements\n  strictness: standard\n\n  # Generate RBS files\n  generate_rbs: true\n\n  # Target Ruby version (affects generated code)\n  target_ruby: "3.0"\n\n  # Enable experimental features\n  experimental:\n    - pattern_matching_types\n    - refinement_types\n\n  # Additional type checking rules\n  checks:\n    # Warn on implicit any types\n    no_implicit_any: true\n    # Error on unused variables\n    no_unused_vars: false\n    # Strict nil checking\n    strict_nil: true\n'})}),"\n",(0,t.jsx)(n.h3,{id:"watch-mode-configuration",children:"Watch Mode Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'watch:\n  # Additional directories to watch\n  paths:\n    - config\n\n  # Debounce delay in milliseconds\n  debounce: 100\n\n  # Clear terminal on rebuild\n  clear_screen: true\n\n  # Run command after successful compile\n  on_success: "bundle exec rspec"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,t.jsx)(n.p,{children:"A typical T-Ruby project structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my-project/\n\u251c\u2500\u2500 trbconfig.yml         # Configuration\n\u251c\u2500\u2500 src/                  # T-Ruby source files (.trb)\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u251c\u2500\u2500 user.trb\n\u2502   \u2502   \u2514\u2500\u2500 post.trb\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u2514\u2500\u2500 auth_service.trb\n\u2502   \u2514\u2500\u2500 main.trb\n\u251c\u2500\u2500 build/                # Compiled output (.rb + .rbs)\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u251c\u2500\u2500 user.rb\n\u2502   \u2502   \u251c\u2500\u2500 user.rbs\n\u2502   \u2502   \u251c\u2500\u2500 post.rb\n\u2502   \u2502   \u2514\u2500\u2500 post.rbs\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 test/                 # Tests (can be .rb or .trb)\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,t.jsx)(n.h2,{id:"environment-specific-configuration",children:"Environment-Specific Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Use environment variables or multiple config files:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="trbconfig.yml"',children:"# Base configuration\n\ncompiler:\n  strictness: ${TRC_STRICTNESS:-standard}\n\noutput:\n  ruby_dir: ${TRC_OUTPUT:-build}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or use separate files:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Development\ntrc --config trc.development.yaml\n\n# Production\ntrc --config trc.production.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-bundler",children:"Integration with Bundler"}),"\n",(0,t.jsx)(n.p,{children:"Add T-Ruby to your Gemfile:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",metastring:'title="Gemfile"',children:'source "https://rubygems.org"\n\ngroup :development do\n  gem "t-ruby"\nend\n\n# Your other dependencies\n'})}),"\n",(0,t.jsx)(n.p,{children:"Create a Rake task:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",metastring:'title="Rakefile"',children:'require "t-ruby/rake_task"\n\nTRuby::RakeTask.new(:compile) do |t|\n  t.config_file = "trbconfig.yml"\nend\n\n# Compile before running tests\ntask test: :compile\n'})}),"\n",(0,t.jsx)(n.p,{children:"Now you can run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bundle exec rake compile\nbundle exec rake test\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-rails",children:"Integration with Rails"}),"\n",(0,t.jsx)(n.p,{children:"For Rails projects, configure T-Ruby to work with the Rails structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="trbconfig.yml"',children:"source:\n  include:\n    - app/models\n    - app/controllers\n    - app/services\n    - lib\n\noutput:\n  ruby_dir: app  # Compile in place\n  preserve_structure: true\n\ncompiler:\n  strictness: standard\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Add to your ",(0,t.jsx)(n.code,{children:"config/application.rb"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'# Watch .trb files in development\nconfig.watchable_extensions << "trb"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,t.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title=".github/workflows/typecheck.yml"',children:"name: Type Check\n\non: [push, pull_request]\n\njobs:\n  typecheck:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up Ruby\n        uses: ruby/setup-ruby@v1\n        with:\n          ruby-version: '3.2'\n          bundler-cache: true\n\n      - name: Install T-Ruby\n        run: gem install t-ruby\n\n      - name: Type Check\n        run: trc check .\n\n      - name: Compile\n        run: trc .\n"})}),"\n",(0,t.jsx)(n.h3,{id:"gitlab-ci",children:"GitLab CI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title=".gitlab-ci.yml"',children:"typecheck:\n  image: ruby:3.2\n  script:\n    - gem install t-ruby\n    - trc check .\n    - trc .\n"})}),"\n",(0,t.jsx)(n.h2,{id:"monorepo-configuration",children:"Monorepo Configuration"}),"\n",(0,t.jsx)(n.p,{children:"For monorepos with multiple packages:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"monorepo/\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2502   \u251c\u2500\u2500 trbconfig.yml\n\u2502   \u2502   \u2514\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 web/\n\u2502   \u2502   \u251c\u2500\u2500 trbconfig.yml\n\u2502   \u2502   \u2514\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 api/\n\u2502       \u251c\u2500\u2500 trbconfig.yml\n\u2502       \u2514\u2500\u2500 src/\n\u2514\u2500\u2500 trc.workspace.yaml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="trc.workspace.yaml"',children:'workspace:\n  packages:\n    - packages/core\n    - packages/web\n    - packages/api\n\n  # Shared configuration\n  shared:\n    compiler:\n      strictness: strict\n      target_ruby: "3.2"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Build all packages:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"trc --workspace\n"})}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsx)(n.p,{children:"With your project configured, explore:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/cli/commands",children:"CLI Commands"})," - All available commands"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/cli/compiler-options",children:"Compiler Options"})," - Detailed option reference"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/learn/basics/type-annotations",children:"Type Annotations"})," - Start writing typed code"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);