<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/basics/type-inference" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Type Inference | T-Ruby</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://type-ruby.github.io/img/t-ruby-social-card.png"><meta data-rh="true" name="twitter:image" content="https://type-ruby.github.io/img/t-ruby-social-card.png"><meta data-rh="true" property="og:url" content="https://type-ruby.github.io/docs/learn/basics/type-inference"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="ja_JP"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Type Inference | T-Ruby"><meta data-rh="true" name="description" content="How T-Ruby automatically infers types"><meta data-rh="true" property="og:description" content="How T-Ruby automatically infers types"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://type-ruby.github.io/docs/learn/basics/type-inference"><link data-rh="true" rel="alternate" href="https://type-ruby.github.io/docs/learn/basics/type-inference" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://type-ruby.github.io/ko/docs/learn/basics/type-inference" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://type-ruby.github.io/ja/docs/learn/basics/type-inference" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://type-ruby.github.io/docs/learn/basics/type-inference" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Type Inference","item":"https://type-ruby.github.io/docs/learn/basics/type-inference"}]}</script><link rel="stylesheet" href="/assets/css/styles.2ed55090.css">
<script src="/assets/js/runtime~main.5a7a056a.js" defer="defer"></script>
<script src="/assets/js/main.24dc02c6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_k978" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="T-Ruby Logo" class="themedComponent_FW6w themedComponent--light_ZYRo"><img src="/img/logo.svg" alt="T-Ruby Logo" class="themedComponent_FW6w themedComponent--dark_Rd3V"></div><b class="navbar__title text--truncate">T-Ruby</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction/what-is-t-ruby">Docs</a><a class="navbar__item navbar__link" href="/playground">Playground</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_xWnT"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn/basics/type-inference" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/ko/docs/learn/basics/type-inference" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">한국어</a></li><li><a href="/ja/docs/learn/basics/type-inference" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja-JP">日本語</a></li></ul></div><a href="https://github.com/type-ruby/t-ruby" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Cy_U"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_lwka colorModeToggle_SVpo"><button class="clean-btn toggleButton_Mbg6 toggleButtonDisabled_dsJi" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_LX0_ lightToggleIcon_iZ7o"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_LX0_ darkToggleIcon_sbHe"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_LX0_ systemToggleIcon_rNLr"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_bxl4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_CSSr"><div class="docsWrapper_b3o4"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ngaE" type="button"></button><div class="docRoot_vnET"><aside class="theme-doc-sidebar-container docSidebarContainer_lkE3"><div class="sidebarViewport_l_GY"><div class="sidebar_rAVx"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_V6cO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/introduction/what-is-t-ruby"><span title="Introduction" class="categoryLinkLabel_ExjS">Introduction</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/what-is-t-ruby"><span title="What is T-Ruby?" class="linkLabel_ElBB">What is T-Ruby?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/why-t-ruby"><span title="Why T-Ruby?" class="linkLabel_ElBB">Why T-Ruby?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/t-ruby-vs-others"><span title="T-Ruby vs Others" class="linkLabel_ElBB">T-Ruby vs Others</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/getting-started/installation"><span title="Getting Started" class="categoryLinkLabel_ExjS">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/installation"><span title="Installation" class="linkLabel_ElBB">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/quick-start"><span title="Quick Start" class="linkLabel_ElBB">Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/first-trb-file"><span title="Your First .trb File" class="linkLabel_ElBB">Your First .trb File</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/editor-setup"><span title="Editor Setup" class="linkLabel_ElBB">Editor Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/project-configuration"><span title="Project Configuration" class="linkLabel_ElBB">Project Configuration</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/learn/basics/type-annotations"><span title="Learn" class="categoryLinkLabel_ExjS">Learn</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/learn/basics/type-annotations"><span title="The Basics" class="categoryLinkLabel_ExjS">The Basics</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/basics/type-annotations"><span title="Type Annotations" class="linkLabel_ElBB">Type Annotations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/basics/basic-types"><span title="Basic Types" class="linkLabel_ElBB">Basic Types</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn/basics/type-inference"><span title="Type Inference" class="linkLabel_ElBB">Type Inference</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/everyday-types/primitives"><span title="Everyday Types" class="categoryLinkLabel_ExjS">Everyday Types</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/functions/parameter-return-types"><span title="Functions" class="categoryLinkLabel_ExjS">Functions</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/classes/class-annotations"><span title="Classes &amp; Modules" class="categoryLinkLabel_ExjS">Classes &amp; Modules</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/interfaces/defining-interfaces"><span title="Interfaces" class="categoryLinkLabel_ExjS">Interfaces</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/generics/generic-functions-classes"><span title="Generics" class="categoryLinkLabel_ExjS">Generics</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/advanced/type-aliases"><span title="Advanced Types" class="categoryLinkLabel_ExjS">Advanced Types</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cli/commands"><span title="CLI Reference" class="categoryLinkLabel_ExjS">CLI Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tooling/rbs-integration"><span title="Tooling" class="categoryLinkLabel_ExjS">Tooling</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/reference/cheatsheet"><span title="Reference" class="categoryLinkLabel_ExjS">Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/project/roadmap"><span title="Project" class="categoryLinkLabel_ExjS">Project</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_WeUM"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_qoff"><div class="docItemContainer_phNv"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_q0fI" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_UB4j"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Learn</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">The Basics</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Type Inference</span></li></ul></nav><div class="tocCollapsible_Jjm_ theme-doc-toc-mobile tocMobile_KLro"><button type="button" class="clean-btn tocCollapsibleButton_ibvO">On this page</button></div><div class="theme-doc-markdown markdown"><div style="display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;background-color:rgba(34, 197, 94, 0.1);color:#16a34a;border:1px solid rgba(34, 197, 94, 0.2);margin-bottom:16px"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-badge-check" aria-hidden="true"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path><path d="m9 12 2 2 4-4"></path></svg><span>Examples Verified (<!-- -->100<!-- -->%)</span></div>
<header><h1>Type Inference</h1></header>
<p>One of T-Ruby&#x27;s most powerful features is type inference. The type system can automatically determine the types of variables and expressions without requiring explicit annotations everywhere. This chapter will teach you how type inference works and when to rely on it.</p>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="what-is-type-inference">What Is Type Inference?<a href="#what-is-type-inference" class="hash-link" aria-label="Direct link to What Is Type Inference?" title="Direct link to What Is Type Inference?" translate="no">​</a></h2>
<p>Type inference is the ability of T-Ruby&#x27;s type checker to automatically deduce the type of a variable or expression based on the value assigned to it or the context in which it&#x27;s used. This means you don&#x27;t always need to write type annotations.</p>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="basic-inference-example">Basic Inference Example<a href="#basic-inference-example" class="hash-link" aria-label="Direct link to Basic Inference Example" title="Direct link to Basic Inference Example" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">basic_inference.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby infers that name is a String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;Alice&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby infers that count is an Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">count = 42</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby infers that price is a Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">price = 19.99</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby infers that active is a Bool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">active = true</span><br></span></code></pre></div></div>
<p>The transpiled Ruby is identical:</p>
<div class="language-ruby codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">basic_inference.rb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-ruby codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Alice&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">count </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">price </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">19.99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">active </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="how-type-inference-works">How Type Inference Works<a href="#how-type-inference-works" class="hash-link" aria-label="Direct link to How Type Inference Works" title="Direct link to How Type Inference Works" translate="no">​</a></h2>
<p>T-Ruby examines the value being assigned and determines its type from the literal:</p>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="literal-based-inference">Literal-Based Inference<a href="#literal-based-inference" class="hash-link" aria-label="Direct link to Literal-Based Inference" title="Direct link to Literal-Based Inference" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">literals.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># String literal → String type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">greeting = &quot;Hello&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Integer literal → Integer type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">age = 25</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Float literal → Float type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">temperature = 98.6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Boolean literal → Bool type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">is_valid = false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Symbol literal → Symbol type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">status = :active</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># nil literal → nil type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nothing = nil</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="expression-based-inference">Expression-Based Inference<a href="#expression-based-inference" class="hash-link" aria-label="Direct link to Expression-Based Inference" title="Direct link to Expression-Based Inference" translate="no">​</a></h3>
<p>T-Ruby can infer types from expressions:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">expressions.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">x = 10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">y = 20</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as Integer (result of Integer + Integer)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sum = x + y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as String (result of String + String)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">first_name = &quot;Alice&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">last_name = &quot;Smith&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">full_name = first_name + &quot; &quot; + last_name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as Float (result of Integer.to_f)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">decimal = x.to_f</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="method-return-type-inference">Method Return Type Inference<a href="#method-return-type-inference" class="hash-link" aria-label="Direct link to Method Return Type Inference" title="Direct link to Method Return Type Inference" translate="no">​</a></h3>
<p>When a method has a return type annotation, T-Ruby knows the type of the result:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">method_returns.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def get_name(): String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;Alice&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby infers that name is a String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = get_name()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def calculate_total(items: Integer, price: Float): Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  items * price</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby infers that total is a Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total = calculate_total(3, 9.99)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="when-inference-works-best">When Inference Works Best<a href="#when-inference-works-best" class="hash-link" aria-label="Direct link to When Inference Works Best" title="Direct link to When Inference Works Best" translate="no">​</a></h2>
<p>Type inference works best for local variables with clear initialization:</p>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="local-variables">Local Variables<a href="#local-variables" class="hash-link" aria-label="Direct link to Local Variables" title="Direct link to Local Variables" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">local_vars.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def process_order(quantity: Integer, unit_price: Float)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # These types are all inferred</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  subtotal = quantity * unit_price</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tax_rate = 0.08</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tax = subtotal * tax_rate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  total = subtotal + tax</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subtotal: subtotal,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tax: tax,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total: total</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>In this example, T-Ruby infers:</p>
<ul>
<li class=""><code>subtotal</code> is <code>Float</code> (Integer * Float = Float)</li>
<li class=""><code>tax_rate</code> is <code>Float</code> (0.08 is a float literal)</li>
<li class=""><code>tax</code> is <code>Float</code> (Float * Float = Float)</li>
<li class=""><code>total</code> is <code>Float</code> (Float + Float = Float)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="array-and-hash-inference">Array and Hash Inference<a href="#array-and-hash-inference" class="hash-link" aria-label="Direct link to Array and Hash Inference" title="Direct link to Array and Hash Inference" translate="no">​</a></h3>
<p>T-Ruby can infer the types of array and hash elements:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">collections.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as Array&lt;Integer&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">numbers = [1, 2, 3, 4, 5]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as Array&lt;String&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">names = [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as Hash&lt;Symbol, String&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: &quot;Alice&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  email: &quot;alice@example.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Inferred as Hash&lt;String, Integer&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scores = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;math&quot; =&gt; 95,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;science&quot; =&gt; 88</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="block-parameter-inference">Block Parameter Inference<a href="#block-parameter-inference" class="hash-link" aria-label="Direct link to Block Parameter Inference" title="Direct link to Block Parameter Inference" translate="no">​</a></h3>
<p>T-Ruby can infer block parameter types when iterating over typed collections:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">blocks.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def sum_numbers(numbers: Array&lt;Integer&gt;): Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  total = 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # T-Ruby infers that n is an Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  numbers.each do |n|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total += n</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  total</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def greet_all(names: Array&lt;String&gt;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # T-Ruby infers that name is a String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  names.each do |name|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    puts &quot;Hello, #{name}!&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="when-to-add-explicit-annotations">When to Add Explicit Annotations<a href="#when-to-add-explicit-annotations" class="hash-link" aria-label="Direct link to When to Add Explicit Annotations" title="Direct link to When to Add Explicit Annotations" translate="no">​</a></h2>
<p>While inference is powerful, there are times when you should add explicit type annotations:</p>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="1-method-signatures-always">1. Method Signatures (Always)<a href="#1-method-signatures-always" class="hash-link" aria-label="Direct link to 1. Method Signatures (Always)" title="Direct link to 1. Method Signatures (Always)" translate="no">​</a></h3>
<p>Always annotate method parameters and return types:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">method_sigs.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Good - explicit annotations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def calculate_discount(price: Float, percent: Integer): Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  price * (percent / 100.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Avoid - no annotations (harder to understand and use)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def calculate_discount(price, percent)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  price * (percent / 100.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="2-instance-variables">2. Instance Variables<a href="#2-instance-variables" class="hash-link" aria-label="Direct link to 2. Instance Variables" title="Direct link to 2. Instance Variables" translate="no">​</a></h3>
<p>Instance variables should be annotated when declared:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">instance_vars.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class ShoppingCart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def initialize()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @items: Array&lt;String&gt; = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @total: Float = 0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def add_item(item: String, price: Float)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @items &lt;&lt; item</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @total += price</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="3-ambiguous-situations">3. Ambiguous Situations<a href="#3-ambiguous-situations" class="hash-link" aria-label="Direct link to 3. Ambiguous Situations" title="Direct link to 3. Ambiguous Situations" translate="no">​</a></h3>
<p>When the type isn&#x27;t clear from the initial value:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">ambiguous.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Ambiguous - is this supposed to be Float or Integer?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">result = 0  # Inferred as Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Better - explicit when you need a Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">result: Float = 0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Or when starting with a temporary value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">users: Array&lt;String&gt; = []  # Will hold usernames later</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="4-union-types">4. Union Types<a href="#4-union-types" class="hash-link" aria-label="Direct link to 4. Union Types" title="Direct link to 4. Union Types" translate="no">​</a></h3>
<p>When a variable might hold different types:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">unions.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Explicit annotation needed for union types</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def find_user(id: Integer): String | nil</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return nil if id &lt; 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;User #{id}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Explicit annotation needed when initially nil</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">current_user: String | nil = nil</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="5-public-apis">5. Public APIs<a href="#5-public-apis" class="hash-link" aria-label="Direct link to 5. Public APIs" title="Direct link to 5. Public APIs" translate="no">​</a></h3>
<p>When defining public methods, classes, or modules:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">public_api.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">module MathHelpers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Public method - fully annotated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def self.calculate_average(numbers: Array&lt;Float&gt;): Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sum = numbers.reduce(0.0) { |acc, n| acc + n }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sum / numbers.length</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Public method - fully annotated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def self.round_currency(amount: Float): String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;$%.2f&quot; % amount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="inference-with-control-flow">Inference with Control Flow<a href="#inference-with-control-flow" class="hash-link" aria-label="Direct link to Inference with Control Flow" title="Direct link to Inference with Control Flow" translate="no">​</a></h2>
<p>T-Ruby&#x27;s inference works through control flow structures:</p>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="if-statements">If Statements<a href="#if-statements" class="hash-link" aria-label="Direct link to If Statements" title="Direct link to If Statements" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">if_statements.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def categorize_age(age: Integer): String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # category is inferred as String in all branches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if age &lt; 13</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    category = &quot;child&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  elsif age &lt; 20</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    category = &quot;teenager&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    category = &quot;adult&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  category</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="case-statements">Case Statements<a href="#case-statements" class="hash-link" aria-label="Direct link to Case Statements" title="Direct link to Case Statements" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">case_statements.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def get_day_type(day: Symbol): String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # day_type is inferred as String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  day_type = case day</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  when :monday, :tuesday, :wednesday, :thursday, :friday</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;weekday&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  when :saturday, :sunday</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;weekend&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;unknown&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  day_type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="common-inference-patterns">Common Inference Patterns<a href="#common-inference-patterns" class="hash-link" aria-label="Direct link to Common Inference Patterns" title="Direct link to Common Inference Patterns" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="pattern-1-initialize-then-use">Pattern 1: Initialize Then Use<a href="#pattern-1-initialize-then-use" class="hash-link" aria-label="Direct link to Pattern 1: Initialize Then Use" title="Direct link to Pattern 1: Initialize Then Use" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">pattern1.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def process_names(raw_names: String): Array&lt;String&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # names is inferred as Array&lt;String&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  names = raw_names.split(&quot;,&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # cleaned is inferred as Array&lt;String&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cleaned = names.map { |n| n.strip.downcase }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cleaned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="pattern-2-accumulator-variables">Pattern 2: Accumulator Variables<a href="#pattern-2-accumulator-variables" class="hash-link" aria-label="Direct link to Pattern 2: Accumulator Variables" title="Direct link to Pattern 2: Accumulator Variables" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">pattern2.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def calculate_stats(numbers: Array&lt;Integer&gt;): Hash&lt;Symbol, Float&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # sum is inferred as Integer (starts at 0, adds Integers)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  sum = 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  numbers.each { |n| sum += n }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # avg is inferred as Float (Integer.to_f)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  avg = sum.to_f / numbers.length</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  { sum: sum.to_f, average: avg }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="pattern-3-builder-pattern">Pattern 3: Builder Pattern<a href="#pattern-3-builder-pattern" class="hash-link" aria-label="Direct link to Pattern 3: Builder Pattern" title="Direct link to Pattern 3: Builder Pattern" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">pattern3.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def build_query(table: String, conditions: Array&lt;String&gt;): String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # query is inferred as String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  query = &quot;SELECT * FROM #{table}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if conditions.length &gt; 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # where_clause is inferred as String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    where_clause = conditions.join(&quot; AND &quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    query += &quot; WHERE #{where_clause}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  query</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="limitations-of-type-inference">Limitations of Type Inference<a href="#limitations-of-type-inference" class="hash-link" aria-label="Direct link to Limitations of Type Inference" title="Direct link to Limitations of Type Inference" translate="no">​</a></h2>
<p>There are situations where T-Ruby cannot infer types automatically:</p>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="empty-collections">Empty Collections<a href="#empty-collections" class="hash-link" aria-label="Direct link to Empty Collections" title="Direct link to Empty Collections" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">empty_collections.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby cannot infer element type from empty array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">items = []  # Needs annotation!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Better - annotate the type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">items: Array&lt;String&gt; = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Or initialize with at least one element</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">items = [&quot;first_item&quot;]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="complex-union-types">Complex Union Types<a href="#complex-union-types" class="hash-link" aria-label="Direct link to Complex Union Types" title="Direct link to Complex Union Types" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">complex_unions.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># T-Ruby cannot infer that this should accept multiple types</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def process_value(value)  # Needs annotation!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if value.is_a?(String)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value.upcase</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  elsif value.is_a?(Integer)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value * 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Better - explicit union type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def process_value(value: String | Integer): String | Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if value.is_a?(String)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value.upcase</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value * 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="recursive-functions">Recursive Functions<a href="#recursive-functions" class="hash-link" aria-label="Direct link to Recursive Functions" title="Direct link to Recursive Functions" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">recursive.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Needs return type annotation for recursion</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def factorial(n: Integer): Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return 1 if n &lt;= 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  n * factorial(n - 1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def fibonacci(n: Integer): Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return n if n &lt;= 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  fibonacci(n - 1) + fibonacci(n - 2)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="best-practices-for-type-inference">Best Practices for Type Inference<a href="#best-practices-for-type-inference" class="hash-link" aria-label="Direct link to Best Practices for Type Inference" title="Direct link to Best Practices for Type Inference" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="1-let-inference-handle-local-variables">1. Let Inference Handle Local Variables<a href="#1-let-inference-handle-local-variables" class="hash-link" aria-label="Direct link to 1. Let Inference Handle Local Variables" title="Direct link to 1. Let Inference Handle Local Variables" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">locals.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def calculate_discount(price: Float, rate: Float): Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Let inference work - types are obvious</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  discount = price * rate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final_price = price - discount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final_price</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="2-annotate-when-sharing-across-scopes">2. Annotate When Sharing Across Scopes<a href="#2-annotate-when-sharing-across-scopes" class="hash-link" aria-label="Direct link to 2. Annotate When Sharing Across Scopes" title="Direct link to 2. Annotate When Sharing Across Scopes" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">shared_scope.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class OrderProcessor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def initialize()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Annotate - shared across methods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @pending_orders: Array&lt;String&gt; = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @completed_count: Integer = 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def add_order(order: String)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @pending_orders &lt;&lt; order</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def complete_order()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @pending_orders.shift</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @completed_count += 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="3-prefer-inference-for-intermediate-calculations">3. Prefer Inference for Intermediate Calculations<a href="#3-prefer-inference-for-intermediate-calculations" class="hash-link" aria-label="Direct link to 3. Prefer Inference for Intermediate Calculations" title="Direct link to 3. Prefer Inference for Intermediate Calculations" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">intermediate.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def calculate_compound_interest(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  principal: Float,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  rate: Float,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  years: Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">): Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # All intermediate values are inferred</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  rate_decimal = rate / 100.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  multiplier = 1.0 + rate_decimal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final_multiplier = multiplier ** years</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final_amount = principal * final_multiplier</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final_amount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="4-annotate-for-clarity-in-complex-logic">4. Annotate for Clarity in Complex Logic<a href="#4-annotate-for-clarity-in-complex-logic" class="hash-link" aria-label="Direct link to 4. Annotate for Clarity in Complex Logic" title="Direct link to 4. Annotate for Clarity in Complex Logic" translate="no">​</a></h3>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">clarity.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def parse_config(raw: String): Hash&lt;Symbol, String | Integer&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Annotate the result type for clarity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  config: Hash&lt;Symbol, String | Integer&gt; = {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  raw.split(&quot;\n&quot;).each do |line|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    key, value = line.split(&quot;=&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config[key.to_sym] = parse_value(value)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def parse_value(value: String): String | Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  integer_value = value.to_i</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if integer_value.to_s == value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    integer_value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="practical-example-invoice-calculator">Practical Example: Invoice Calculator<a href="#practical-example-invoice-calculator" class="hash-link" aria-label="Direct link to Practical Example: Invoice Calculator" title="Direct link to Practical Example: Invoice Calculator" translate="no">​</a></h2>
<p>Here&#x27;s a complete example showing effective use of type inference:</p>
<div class="language-trb codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_cmKt">invoice.trb</div><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-trb codeBlock_Nmz_ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class Invoice</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def initialize(customer: String)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @customer: String = customer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @items: Array&lt;Hash&lt;Symbol, String | Float&gt;&gt; = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @tax_rate: Float = 0.08</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def add_item(name: String, price: Float, quantity: Integer)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # item type is inferred from hash literal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    item = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name: name,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      price: price,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      quantity: quantity,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      total: price * quantity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @items &lt;&lt; item</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def calculate_total(): Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # subtotal is inferred as Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subtotal = 0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @items.each do |item|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      # T-Ruby infers item properties from array type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      subtotal += item[:total]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # tax and total are inferred as Float</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tax = subtotal * @tax_rate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total = subtotal + tax</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def generate_summary(): String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Inferred types throughout</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total = calculate_total()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    item_count = @items.length</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;Invoice for #{@customer}: #{item_count} items, Total: $#{&#x27;%.2f&#x27; % total}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Usage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">invoice = Invoice.new(&quot;Alice&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">invoice.add_item(&quot;Widget&quot;, 9.99, 2)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">invoice.add_item(&quot;Gadget&quot;, 14.99, 1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">summary: String = invoice.generate_summary()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Returns: &quot;Invoice for Alice: 2 items, Total: $37.57&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h2>
<p>Type inference in T-Ruby allows you to write clean, concise code while maintaining type safety:</p>
<ul>
<li class=""><strong>Inference works</strong> for local variables, literals, and expressions</li>
<li class=""><strong>Always annotate</strong> method signatures, instance variables, and public APIs</li>
<li class=""><strong>Add annotations</strong> when types are ambiguous or complex</li>
<li class=""><strong>Trust inference</strong> for intermediate calculations and local variables</li>
<li class=""><strong>Use explicit types</strong> for empty collections and union types</li>
</ul>
<p>The goal is to strike a balance: let inference reduce clutter while adding annotations where they improve clarity and safety.</p>
<p>In the next section, you&#x27;ll learn about everyday types like arrays, hashes, and union types that you&#x27;ll use regularly in T-Ruby.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_LFcd"><a href="https://github.com/type-ruby/t-ruby.github.io/tree/main/docs/learn/basics/type-inference.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_cm6n" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_o2CG"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/learn/basics/basic-types"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Basic Types</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/learn/everyday-types/primitives"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Primitives</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Odgc thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-type-inference" class="table-of-contents__link toc-highlight">What Is Type Inference?</a><ul><li><a href="#basic-inference-example" class="table-of-contents__link toc-highlight">Basic Inference Example</a></li></ul></li><li><a href="#how-type-inference-works" class="table-of-contents__link toc-highlight">How Type Inference Works</a><ul><li><a href="#literal-based-inference" class="table-of-contents__link toc-highlight">Literal-Based Inference</a></li><li><a href="#expression-based-inference" class="table-of-contents__link toc-highlight">Expression-Based Inference</a></li><li><a href="#method-return-type-inference" class="table-of-contents__link toc-highlight">Method Return Type Inference</a></li></ul></li><li><a href="#when-inference-works-best" class="table-of-contents__link toc-highlight">When Inference Works Best</a><ul><li><a href="#local-variables" class="table-of-contents__link toc-highlight">Local Variables</a></li><li><a href="#array-and-hash-inference" class="table-of-contents__link toc-highlight">Array and Hash Inference</a></li><li><a href="#block-parameter-inference" class="table-of-contents__link toc-highlight">Block Parameter Inference</a></li></ul></li><li><a href="#when-to-add-explicit-annotations" class="table-of-contents__link toc-highlight">When to Add Explicit Annotations</a><ul><li><a href="#1-method-signatures-always" class="table-of-contents__link toc-highlight">1. Method Signatures (Always)</a></li><li><a href="#2-instance-variables" class="table-of-contents__link toc-highlight">2. Instance Variables</a></li><li><a href="#3-ambiguous-situations" class="table-of-contents__link toc-highlight">3. Ambiguous Situations</a></li><li><a href="#4-union-types" class="table-of-contents__link toc-highlight">4. Union Types</a></li><li><a href="#5-public-apis" class="table-of-contents__link toc-highlight">5. Public APIs</a></li></ul></li><li><a href="#inference-with-control-flow" class="table-of-contents__link toc-highlight">Inference with Control Flow</a><ul><li><a href="#if-statements" class="table-of-contents__link toc-highlight">If Statements</a></li><li><a href="#case-statements" class="table-of-contents__link toc-highlight">Case Statements</a></li></ul></li><li><a href="#common-inference-patterns" class="table-of-contents__link toc-highlight">Common Inference Patterns</a><ul><li><a href="#pattern-1-initialize-then-use" class="table-of-contents__link toc-highlight">Pattern 1: Initialize Then Use</a></li><li><a href="#pattern-2-accumulator-variables" class="table-of-contents__link toc-highlight">Pattern 2: Accumulator Variables</a></li><li><a href="#pattern-3-builder-pattern" class="table-of-contents__link toc-highlight">Pattern 3: Builder Pattern</a></li></ul></li><li><a href="#limitations-of-type-inference" class="table-of-contents__link toc-highlight">Limitations of Type Inference</a><ul><li><a href="#empty-collections" class="table-of-contents__link toc-highlight">Empty Collections</a></li><li><a href="#complex-union-types" class="table-of-contents__link toc-highlight">Complex Union Types</a></li><li><a href="#recursive-functions" class="table-of-contents__link toc-highlight">Recursive Functions</a></li></ul></li><li><a href="#best-practices-for-type-inference" class="table-of-contents__link toc-highlight">Best Practices for Type Inference</a><ul><li><a href="#1-let-inference-handle-local-variables" class="table-of-contents__link toc-highlight">1. Let Inference Handle Local Variables</a></li><li><a href="#2-annotate-when-sharing-across-scopes" class="table-of-contents__link toc-highlight">2. Annotate When Sharing Across Scopes</a></li><li><a href="#3-prefer-inference-for-intermediate-calculations" class="table-of-contents__link toc-highlight">3. Prefer Inference for Intermediate Calculations</a></li><li><a href="#4-annotate-for-clarity-in-complex-logic" class="table-of-contents__link toc-highlight">4. Annotate for Clarity in Complex Logic</a></li></ul></li><li><a href="#practical-example-invoice-calculator" class="table-of-contents__link toc-highlight">Practical Example: Invoice Calculator</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/what-is-t-ruby">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/basics/basic-types">Basic Types</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/playground">Playground</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference/cheatsheet">Type Cheatsheet</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cli/commands">CLI Reference</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/type-ruby/t-ruby" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Cy_U"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/project/contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/project/roadmap">Roadmap</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 T-Ruby. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>