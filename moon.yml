# t-ruby 공식 문서 사이트 moon 설정
# 문서: https://moonrepo.dev/docs/config/project

$schema: 'https://moonrepo.dev/schemas/project.json'

language: 'typescript'
type: 'application'

# 프로젝트 메타데이터
project:
  name: 't-ruby-docs'
  description: 'T-Ruby 공식 문서 사이트 (Docusaurus)'
  channel: '#t-ruby-docs'

# 태스크 정의
tasks:
  # 개발 서버 시작
  start:
    command: 'pnpm start'
    local: true
    platform: 'node'

  # 프로덕션 빌드
  build:
    command: 'pnpm build'
    inputs:
      - 'docs/**/*'
      - 'src/**/*'
      - 'i18n/**/*'
      - 'docusaurus.config.ts'
      - 'sidebars.ts'
    outputs:
      - 'build/**/*'
    platform: 'node'

  # 타입 체크
  typecheck:
    command: 'pnpm typecheck'
    inputs:
      - 'src/**/*.ts'
      - 'src/**/*.tsx'
      - 'tsconfig.json'
    platform: 'node'

  # 배포
  deploy:
    command: 'pnpm deploy'
    deps:
      - '~:build'
    platform: 'node'
