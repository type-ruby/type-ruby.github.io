"use strict";(globalThis.webpackChunkt_ruby_docs=globalThis.webpackChunkt_ruby_docs||[]).push([[3365],{7276:(e,n,r)=>{r.d(n,{A:()=>l});r(9378);var a=r(513),s=r(2714);function l({children:e,fallback:n}){return(0,a.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):n??null}},9731:(e,n,r)=>{r.r(n),r.d(n,{default:()=>p});var a=r(9378),s=r(5043),l=r(2623),t=r(2273),i=r(7276);const o={playground:"playground_es7I",header:"header_tRbQ",subtitle:"subtitle_KLfx",container:"container_tS08",panel:"panel_mskZ",panelHeader:"panelHeader_licZ",panelTitle:"panelTitle_fnkw",panelActions:"panelActions_kMKX",exampleSelect:"exampleSelect_zCyJ",compileButton:"compileButton_Ek8p",tabs:"tabs_SUXD",tab:"tab_CWX0",tabActive:"tabActive_kQNP",tabError:"tabError_MsEd",editorWrapper:"editorWrapper_acPh",filenameBar:"filenameBar_io_Y",editor:"editor_jOh4",output:"output_iH9E",outputCode:"outputCode_cHdv",errorList:"errorList_Ju6v",errorItem:"errorItem_PBDF",noErrors:"noErrors_eJUK",footer:"footer_ldla",loading:"loading_teKl",compilerStatus:"compilerStatus_m_WZ",compilerStatusFallback:"compilerStatusFallback_PIpt"};var d=r(2714);const c={"hello-world":{name:(0,t.T)({id:"playground.examples.helloWorld",message:"Hello World"}),code:'# hello.trb\ndef greet(name: String): String\n  "Hello, #{name}!"\nend\n\nputs greet("World")'},"basic-types":{name:(0,t.T)({id:"playground.examples.basicTypes",message:"Basic Types"}),code:"# Basic type annotations\ndef add(a: Integer, b: Integer): Integer\n  a + b\nend\n\ndef concat(str1: String, str2: String): String\n  str1 + str2\nend\n\ndef is_valid(flag: Bool): Bool\n  !flag\nend\n\nresult = add(10, 20)\nputs result"},"union-types":{name:(0,t.T)({id:"playground.examples.unionTypes",message:"Union Types"}),code:"# Union types allow multiple types\ndef stringify(value: String | Integer | Float): String\n  value.to_s\nend\n\ndef find_user(id: Integer): User | nil\n  # Returns User or nil\n  nil\nend\n\n# Optional shorthand (same as T | nil)\ndef get_name(user: User?): String?\n  user&.name\nend"},generics:{name:(0,t.T)({id:"playground.examples.generics",message:"Generics"}),code:"# Generic functions\ndef first<T>(arr: Array<T>): T | nil\n  arr[0]\nend\n\ndef map<T, U>(arr: Array<T>, &block: (T) -> U): Array<U>\n  arr.map(&block)\nend\n\n# Generic class\nclass Box<T>\n  @value: T\n\n  def initialize(value: T): void\n    @value = value\n  end\n\n  def get: T\n    @value\n  end\nend\n\nbox = Box.new(42)\nputs box.get"},interfaces:{name:(0,t.T)({id:"playground.examples.interfaces",message:"Interfaces"}),code:'# Define an interface\ninterface Printable\n  def to_string: String\nend\n\ninterface Comparable<T>\n  def compare(other: T): Integer\nend\n\n# Implement interface\nclass User\n  implements Printable\n\n  @name: String\n  @age: Integer\n\n  def initialize(name: String, age: Integer): void\n    @name = name\n    @age = age\n  end\n\n  def to_string: String\n    "User(#{@name}, #{@age})"\n  end\nend'},classes:{name:(0,t.T)({id:"playground.examples.classes",message:"Classes"}),code:'# Class with type annotations\nclass Person\n  @name: String\n  @age: Integer\n  @@count: Integer = 0\n\n  def initialize(name: String, age: Integer): void\n    @name = name\n    @age = age\n    @@count += 1\n  end\n\n  def greet: String\n    "Hi, I\'m #{@name}"\n  end\n\n  def self.count: Integer\n    @@count\n  end\nend\n\nclass Employee < Person\n  @department: String\n\n  def initialize(name: String, age: Integer, dept: String): void\n    super(name, age)\n    @department = dept\n  end\nend'}};function u(){const[e,n]=(0,a.useState)(c["hello-world"].code),[s,i]=(0,a.useState)("hello-world"),[u,p]=(0,a.useState)("ruby"),[m,g]=(0,a.useState)({ruby:(0,t.T)({id:"playground.output.clickToCompile",message:'# Click "Compile" to see output'}),rbs:(0,t.T)({id:"playground.output.clickToGenerateRbs",message:'# Click "Compile" to generate RBS'}),errors:[]}),[b,h]=(0,a.useState)(!1),[y,x]=(0,a.useState)("idle"),[f,j]=(0,a.useState)(""),[T,v]=(0,a.useState)(null),S=(0,a.useCallback)(async()=>{x("loading"),j("Loading Ruby runtime...");try{const{loadTRubyCompiler:e}=await r.e(7390).then(r.bind(r,7390)),n=await e(e=>{j(e.message)});return x("ready"),v(n),n}catch(e){console.warn("WASM compiler failed to load, using mock compiler:",e),x("error"),j("");const n={compile(e){const n=e.split("\n"),r=[],a=[];for(const l of n){let e=l.replace(/\):\s*\w+(\s*\|\s*\w+)*(\?)?(\s*{|$)/g,")$3").replace(/(\w+):\s*([A-Z]\w*(\s*\|\s*\w+)*\??)/g,"$1").replace(/<[A-Z]\w*(,\s*[A-Z]\w*)*>/g,"").replace(/^interface\s+.*$/g,"# interface removed").replace(/^\s*implements\s+.*$/g,"").replace(/@(\w+):\s*([A-Z]\w*(\s*\|\s*\w+)*\??)(\s*=.*)?$/g,"@$1$4");r.push(e)}const s=e.matchAll(/def\s+(\w+)(\([^)]*\))?:\s*(\w+(\s*\|\s*\w+)*\??)/g);for(const l of s){const[,e,n,r]=l;a.push(`def ${e}: ${n||"()"} -> ${r}`)}return{success:!0,ruby:r.join("\n"),rbs:a.length>0?a.join("\n\n"):"# No type signatures generated",errors:[]}}};return v(n),n}},[]),_=(0,a.useCallback)(e=>{const r=e.target.value;i(r),n(c[r].code)},[]),A=(0,a.useCallback)(async()=>{h(!0);try{let n=T;n||(n=await S());const r=n.compile(e);g({ruby:r.ruby,rbs:r.rbs,errors:r.errors}),r.errors.length>0?p("errors"):p("ruby")}catch(n){g({ruby:"",rbs:"",errors:[`Compilation error: ${n}`]}),p("errors")}finally{h(!1)}},[e,T,S]);(0,a.useEffect)(()=>{},[]);return(0,d.jsxs)("div",{className:o.playground,children:[(0,d.jsxs)("div",{className:o.header,children:[(0,d.jsx)(l.A,{as:"h1",children:(0,d.jsx)(t.A,{id:"playground.title",children:"Playground"})}),(0,d.jsx)("p",{className:o.subtitle,children:(0,d.jsx)(t.A,{id:"playground.subtitle",children:"Write T-Ruby code and see the compiled output in real-time."})}),"ready"===y&&(0,d.jsx)("span",{className:o.compilerStatus,children:(0,d.jsx)(t.A,{id:"playground.status.wasmReady",children:"WASM Compiler Ready"})}),"error"===y&&(0,d.jsx)("span",{className:o.compilerStatusFallback,children:(0,d.jsx)(t.A,{id:"playground.status.fallback",children:"Using simplified compiler"})})]}),(0,d.jsxs)("div",{className:o.container,children:[(0,d.jsxs)("div",{className:o.panel,children:[(0,d.jsxs)("div",{className:o.panelHeader,children:[(0,d.jsx)("span",{className:o.panelTitle,children:(0,d.jsx)(t.A,{id:"playground.input.title",children:"Input"})}),(0,d.jsxs)("div",{className:o.panelActions,children:[(0,d.jsx)("select",{value:s,onChange:_,className:o.exampleSelect,children:Object.entries(c).map(([e,{name:n}])=>(0,d.jsx)("option",{value:e,children:n},e))}),(0,d.jsx)("button",{onClick:A,disabled:b||"loading"===y,className:o.compileButton,children:"loading"===y?f||"Loading...":b?(0,t.T)({id:"playground.compile.compiling",message:"Compiling..."}):(0,t.T)({id:"playground.compile.button",message:"Compile"})})]})]}),(0,d.jsxs)("div",{className:o.editorWrapper,children:[(0,d.jsx)("div",{className:o.filenameBar,children:(0,d.jsx)("span",{children:(0,d.jsx)(t.A,{id:"playground.input.filename",children:"example.trb"})})}),(0,d.jsx)("textarea",{value:e,onChange:e=>n(e.target.value),className:o.editor,spellCheck:!1,placeholder:(0,t.T)({id:"playground.input.placeholder",message:"Write your T-Ruby code here..."})})]})]}),(0,d.jsxs)("div",{className:o.panel,children:[(0,d.jsxs)("div",{className:o.panelHeader,children:[(0,d.jsx)("span",{className:o.panelTitle,children:(0,d.jsx)(t.A,{id:"playground.output.title",children:"Output"})}),(0,d.jsxs)("div",{className:o.tabs,children:[(0,d.jsx)("button",{className:`${o.tab} ${"ruby"===u?o.tabActive:""}`,onClick:()=>p("ruby"),children:(0,d.jsx)(t.A,{id:"playground.output.ruby",children:".rb"})}),(0,d.jsx)("button",{className:`${o.tab} ${"rbs"===u?o.tabActive:""}`,onClick:()=>p("rbs"),children:(0,d.jsx)(t.A,{id:"playground.output.rbs",children:".rbs"})}),(0,d.jsxs)("button",{className:`${o.tab} ${"errors"===u?o.tabActive:""} ${m.errors.length>0?o.tabError:""}`,onClick:()=>p("errors"),children:[(0,d.jsx)(t.A,{id:"playground.output.errors",children:"Errors"})," ",m.errors.length>0&&`(${m.errors.length})`]})]})]}),(0,d.jsxs)("div",{className:o.editorWrapper,children:[(0,d.jsx)("div",{className:o.filenameBar,children:(0,d.jsxs)("span",{children:["ruby"===u&&"example.rb","rbs"===u&&"example.rbs","errors"===u&&(0,d.jsx)(t.A,{id:"playground.output.compilationErrors",children:"Compilation Errors"})]})}),(0,d.jsx)("div",{className:o.output,children:"errors"===u?m.errors.length>0?(0,d.jsx)("ul",{className:o.errorList,children:m.errors.map((e,n)=>(0,d.jsx)("li",{className:o.errorItem,children:e},n))}):(0,d.jsx)("p",{className:o.noErrors,children:(0,d.jsx)(t.A,{id:"playground.output.noErrors",children:"No errors"})}):(0,d.jsx)("pre",{className:o.outputCode,children:(0,d.jsx)("code",{children:"ruby"===u?m.ruby:m.rbs})})})]})]})]}),(0,d.jsx)("div",{className:o.footer,children:(0,d.jsx)("p",{children:"error"===y?(0,d.jsx)("strong",{children:(0,d.jsx)(t.A,{id:"playground.footer.fallbackNote",children:"Note: Using simplified compiler. For full functionality, install T-Ruby locally with gem install t-ruby."})}):(0,d.jsx)(t.A,{id:"playground.footer.wasmNote",children:"Powered by ruby.wasm - Running T-Ruby compiler directly in your browser."})})})]})}function p(){return(0,d.jsx)(s.A,{title:(0,t.T)({id:"playground.layout.title",message:"Playground"}),description:(0,t.T)({id:"playground.layout.description",message:"Try T-Ruby in your browser"}),children:(0,d.jsx)(i.A,{fallback:(0,d.jsx)("div",{className:o.loading,children:"Loading playground..."}),children:()=>(0,d.jsx)(u,{})})})}}}]);